<!doctype html>
<!-- © 2025 DinnerMath — Calculator code and design are proprietary.
     Licensed for end-user viewing only via comesail.github.io. -->
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>DinnerMath — Oysters Quantity Calculator (Tenderloin ultratight)</title>
<meta name="description" content="How many oysters per person? Estimate about oyster count, dozens, and sacks, plus optional pricing.">
<style>
  :root{ --ink:#111827; --muted:#6b7280; --line:#e5e7eb; --bg:#ffffff; --card:#ffffff; }
  *{box-sizing:border-box}
  html,body{margin:0;padding:0}
  body{background:var(--bg);color:var(--ink);font-family:"Inter",ui-sans-serif,system-ui,-apple-system,"Segoe UI",Roboto,Helvetica,Arial}
  .wrap{max-width:740px;margin:0 auto;padding:clamp(8px,1.6vw,14px)}
  .dm-card{background:var(--card);border:1px solid var(--line);border-radius:0px;padding:10px;margin:8px 0;box-shadow:0 1px 0 rgba(17,24,39,.06),0 1px 2px rgba(17,24,39,.05)}
  h1{font-size:20px;margin:0 0 6px;text-align:center;font-weight:800}
  h3{font-size:15px;margin:0 0 6px;text-align:center;font-weight:800}
  .lede{color:var(--muted);margin:0 0 8px;text-align:center;font-weight:400;font-size:12.5px}
  .row{display:grid;grid-template-columns:1fr 1fr;gap:6px}
  @media (max-width:820px){.row{grid-template-columns:1fr}}
  label{font-size:10.5px;color:#374151;display:block;margin:0 0 2px;font-weight:600;text-align:left}
  input[type="number"],select{width:100%;border:1px solid #d1d5db;border-radius:7px;padding:6px 8px;font-size:12.5px;line-height:1.2;background:#fff;color:var(--ink)}
  .muted{color:var(--muted);font-size:11px}
  .fine{font-size:12.5px;color:#374151;line-height:1.35}
  .inline{display:flex;align-items:center;gap:6px;flex-wrap:wrap}
  .divider{height:1px;background:var(--line);margin:8px 0}
  .btn{display:inline-block;border:1.5px solid var(--ink);border-radius:999px;padding:6px 10px;font-size:12.5px;font-weight:700;text-decoration:none;color:var(--ink);cursor:pointer;background:#fff}
  .btn:hover{background:#f3f4f6}
  .btn:focus-visible, .preset:focus-visible{outline:3px solid #94a3b8;outline-offset:2px}
  .pill{font-size:10px;border:1px solid #d1d5db;border-radius:999px;padding:2px 6px;color:#475569;background:#fff;text-decoration:none}
  .preset{border:2px solid var(--ink);background:#f8fafc;border-radius:999px;padding:5px 10px;font-size:13px;font-weight:800;cursor:pointer}
  .preset:hover{background:#eef2f7}
  .result{border:2px solid var(--ink);border-radius:0px;padding:10px;margin-top:6px;background:#fff}
  .result .big{font-size:24px;font-weight:800;line-height:1.2;color:var(--ink);font-variant-numeric:tabular-nums}
  .finder{padding:8px;border-radius:0px;border:2px solid var(--ink);background:#fff}
  .visually-hidden{position:absolute!important;clip:rect(1px,1px,1px,1px);clip-path:inset(50%);height:1px;width:1px;overflow:hidden;white-space:nowrap;border:0;padding:0;margin:-1px}
  [aria-label="Guests"]{display:flex;flex-wrap:wrap;gap:6px;align-items:flex-end}
  [aria-label="Guests"]>div{flex:0 0 auto}
  #A,#T,#C{width:110px}
  [aria-label="Guests"]>div:nth-child(4){flex:1 1 240px;min-width:220px}
  .row-2{display:grid;grid-template-columns:1fr 1fr;gap:10px}
  @media (max-width:820px){ .row-2{grid-template-columns:1fr} }
  a, a:visited{color:var(--ink)}
</style>
</head>
<body class="ultra">
  <div class="wrap" id="oysters">

    <!-- Header -->
    <div class="dm-card" role="region" aria-label="Header">
      <h1>Oysters Quantity Calculator — How Many to Buy</h1>
      <p class="lede">
        Enter guests and settings (or tap a quick preset). We will estimate how many <strong>oysters</strong> to buy (planning estimate).
      </p>
    </div>

    <!-- Inputs -->
    <div class="dm-card" role="region" aria-label="Inputs">
      <h3>Inputs</h3>
      <div class="row" aria-label="Guests">
        <div><label for="A">Adults</label><input id="A" type="number" min="0" step="1" inputmode="numeric" value="10" autofocus></div>
        <div><label for="T">Teens</label><input id="T" type="number" min="0" step="1" inputmode="numeric" value="0"></div>
        <div><label for="C">Children</label><input id="C" type="number" min="0" step="1" inputmode="numeric" value="0"></div>
        <div>
          <label for="course">Course mode</label>
          <select id="course">
            <option value="main" selected>Main dish</option>
            <option value="mixed">Mixed buffet</option>
            <option value="app">Appetizer/snack</option>
          </select>
        </div>
      </div>

      <div class="row" aria-label="Context">
        <div>
          <label for="length">Event length</label>
          <select id="length">
            <option value="0.95">Short - about 1 to 2 hours</option>
            <option value="1.00" selected>Standard - about 2 to 3 hours</option>
            <option value="1.08">Long - about 3 to 4 hours</option>
            <option value="1.15">Extended - about 4 to 5 hours</option>
          </select>
        </div>
        <div>
          <label for="leftovers">Add leftovers</label>
          <select id="leftovers">
            <option value="1.00" selected>No</option>
            <option value="1.10">+10%</option>
            <option value="1.20">+20%</option>
          </select>
        </div>
        <div>
          <label for="appetite">Appetite</label>
          <select id="appetite">
            <option value="0.90">Light</option>
            <option value="1.00" selected>Typical</option>
            <option value="1.20">Hearty</option>
          </select>
        </div>
        <div>
          <label for="sackPreset">Sack size preset (oysters)</label>
          <select id="sackPreset">
            <option value="80" selected>Small — about 80 oysters</option>
            <option value="100">Standard — about 100 oysters</option>
            <option value="120">Party — about 120 oysters</option>
            <option value="custom">Custom (enter a count)</option>
          </select>
          <div class="muted">Choose a labeled sack size or custom to enter your own.</div>
        </div>
        <div id="sackCustomWrap" class="">
          <label for="sack">Custom sack size each (oysters)</label>
          <input id="sack" type="number" min="24" step="1" value="100">
          <div class="muted">Enter a per-sack count if you picked "Custom".</div>
        </div>
      </div>

      <div class="inline" style="margin-top:6px">
        <span class="muted">Quick presets:</span>
        <button class="preset" data-people="10" type="button">10</button>
        <button class="preset" data-people="25" type="button">25</button>
        <button class="preset" data-people="50" type="button">50</button>
        <button class="preset" data-people="100" type="button">100</button>
        <span class="muted">Presets set all as adults. Tweak Teens and Children if needed.</span>
        <div style="flex:1"></div>
        <button id="dmReset" type="button" class="btn">Reset</button>
      </div>
    </div>

    <!-- Micro-summary -->
    <div class="muted" id="outMicro" style="margin:6px 0 0 0">-</div>

    <!-- Results -->
    <div class="dm-card" role="region" aria-label="Results" aria-live="polite" aria-atomic="true">
      <h3>Results (estimate)</h3>
      <div class="result">
        <div class="muted" aria-hidden="true">Estimated oysters to buy</div>
        <div class="big" id="outBig" aria-label="No estimate yet">-</div>
        <div class="fine" id="outFrom">-</div>
        <div class="fine" id="outExplain">Enter your guest mix to calculate.</div>
        <div class="fine" id="outDozLine">-</div>
        <div class="fine" id="outSackLine">-</div>
        <div class="divider"></div>
        <div class="inline">
          <span class="pill" id="pillGuests">-</span>
          <span class="pill" id="pillSack">-</span>
          <span class="pill" id="pillPrice">pricing optional</span>
        </div>
      </div>

      <!-- Keep original outputs (logic relies on these IDs) -->
      <span id="outGuests" class="visually-hidden">-</span>
      <span id="outEach"   class="visually-hidden">-</span>
      <span id="outDozens" class="visually-hidden">-</span>
      <span id="outSacks"  class="visually-hidden">-</span>

      <div class="row-2" style="margin-top:10px">
        <div class="dm-card" style="margin:0">
          <h3>Cost estimate</h3>
          <div class="inline">
            <div><label>Subtotal</label><div id="outSubtotal" class="fine">$-</div></div>
            <div><label>Tax and fees</label><div id="outAdds" class="fine">$-</div></div>
            <div><label>Estimated total</label><div id="outTotal" class="fine">$-</div></div>
            <div><label>Per person</label><div id="outPPP" class="fine">$-</div></div>
          </div>
        </div>
        <div class="dm-card finder" role="region" aria-label="Find near me" style="margin:0">
          <div class="inline">
            <a class="btn" href="#" onclick="try{window.open('https://www.google.com/maps/search/oysters+near+me','_blank');}catch(e){location.href='https://www.google.com/maps/search/oysters+near+me';}return false;">Find oysters near me</a>
            <a class="pill" href="#" onclick="try{window.open('https://www.google.com/maps/search/seafood+market','_blank');}catch(e){location.href='https://www.google.com/maps/search/seafood+market';}return false;">Seafood markets</a>
            <a class="pill" href="#" onclick="try{window.open('https://www.google.com/maps/search/raw+bar','_blank');}catch(e){location.href='https://www.google.com/maps/search/raw+bar';}return false;">Raw bars</a>
          </div>
        </div>
      </div>
    </div>

    <!-- Pricing (optional) -->
    <div class="dm-card" role="region" aria-label="Pricing">
      <h3>Pricing (optional)</h3>
      <div class="row">
        <div><label for="priceUnit">Unit price (US dollars per oyster)</label><input id="priceUnit" type="number" min="0" step="0.01" inputmode="decimal" placeholder="e.g., 1.25"></div>
        <div><label for="taxPct">Sales tax (percent)</label><input id="taxPct" type="number" min="0" step="0.1" inputmode="decimal" placeholder="e.g., 7.5"></div>
        <div><label for="fees">Extra fees (US dollars)</label><input id="fees" type="number" min="0" step="0.01" inputmode="decimal" placeholder="e.g., 8.00"></div>
      </div>
      <div class="muted">Cost = about oysters × unit price + tax + extra fees.</div>
    </div>

  </div>

  <!-- Logic preserved from your original oysters.html (IDs/math intact) -->
  <script>
  (function(){
    const $ = id => document.getElementById(id);
    const N = (v,d=0)=>{const n=parseFloat(v);return isFinite(n)?n:d;};
    const money = n => (isFinite(n)&&n>=0) ? "$"+n.toFixed(2) : "$-";
    const fmt = (n,d=0)=> isFinite(n) ? n.toLocaleString(undefined,{minimumFractionDigits:d,maximumFractionDigits:d}) : "-";
    const ceil = Math.ceil;

    function courseMult(c){ if(c==="main") return 1.00; if(c==="mixed") return 0.67; return 0.33; }
    function lenMult(v){ if(v==1.15) return 1.15; if(v==1.08) return 1.08; if(v==0.95) return 0.95; return 1.00; }

    function getSackSize(){
      const preset = document.getElementById("sackPreset").value;
      if(preset==="custom"){
        return Math.max(24, N(document.getElementById("sack").value,100));
      }
      return N(preset,100);
    }

    function compute(){
      const A=N($("A").value,0), T=N($("T").value,0), C=N($("C").value,0);
      const guests=A+T+C;
      // baselines in EACH per person
      const base = {adult:12, teen:9.6, child:7.2};
      let each = (A*base.adult + T*base.teen + C*base.child)
                * courseMult($("course").value)
                * N($("appetite").value,1.0)
                * lenMult(N($("length").value,1.0))
                * N($("leftovers").value,1.0);

      const oysters = Math.max(0, Math.round(each)); // round to whole oysters
      const dozens = oysters/12;
      const sackSize = getSackSize();
      const sacks = sackSize>0 ? ceil(oysters / sackSize) : 0;

      const price=N($("priceUnit").value,0), tax=N($("taxPct").value,0)/100, fees=N($("fees").value,0);
      const sub=oysters*price, adds=sub*tax + (fees>0?fees:0), tot=sub+adds, ppp=(guests>0 && tot>0)? tot/guests : NaN;

      return {guests, oysters, dozens, sacks, sackSize, sub, adds, tot, ppp};
    }

    function render(){
      // Select-all on focus for A/T/C
      ["A","T","C"].forEach(id=>{
        const el=$(id);
        if(el && !el._dmSel){ el._dmSel=true; el.addEventListener("focus",()=>{ try{ el.select(); }catch(e){} }); }
      });

      const preset = document.getElementById("sackPreset").value;
      const wrap = document.getElementById("sackCustomWrap");
      if(preset==="custom"){ wrap.style.display="block"; } else { wrap.style.display="none"; }

      const s=compute();

      // Big number + ARIA
      const bigTxt = s.guests>0 ? (s.oysters.toLocaleString() + " oysters") : "-";
      $("outBig").textContent = bigTxt;
      $("outBig").setAttribute("aria-label", s.guests>0 ? ("Estimated oysters to buy: " + s.oysters.toLocaleString()) : "No estimate yet");

      // Secondary lines
      $("outExplain").textContent = s.guests>0
        ? "Auto-calculated from course, appetite, event length, leftovers, and sack size."
        : "Enter your guest mix to calculate.";
      $("outDozLine").textContent = s.guests>0
        ? ("About " + s.dozens.toFixed(1) + " dozens.")
        : "-";
      $("outSackLine").textContent = s.guests>0
        ? ("About " + (s.sacks>0?s.sacks.toLocaleString():"0") + " sacks at " + (s.sackSize? s.sackSize + " each":"-") + ".")
        : "-";

      const appetiteTxt = $("appetite").selectedOptions[0].text.toLowerCase();
      const lengthTxt = $("length").selectedOptions[0].text.toLowerCase();
      const leftTxt = $("leftovers").selectedOptions[0].text.toLowerCase();
      const courseTxt = $("course").value==="main" ? "main dish" : ($("course").value==="mixed" ? "mixed buffet" : "appetizer/snack");

      // "Estimated from..." line
      $("outFrom").textContent = s.guests>0
        ? ("Estimated from " + s.guests + " guests - " + courseTxt + ", " + appetiteTxt + " appetite, " + lengthTxt + ", leftovers " + leftTxt + ".")
        : "-";

      // Micro-summary (above Results)
      $("outMicro").textContent = s.guests>0
        ? (s.guests + " guests • " + courseTxt + " • " + appetiteTxt + " appetite • " + lengthTxt + " • leftovers " + leftTxt + " • sack " + (s.sackSize||"-"))
        : "-";

      // Keep original outputs updated (for compatibility)
      $("outGuests").textContent = s.guests>0 ? String(s.guests) : "—";
      $("outEach").textContent   = s.guests>0 ? s.oysters.toLocaleString() : "—";
      $("outDozens").textContent = s.guests>0 ? s.dozens.toFixed(1) : "—";
      $("outSacks").textContent  = s.guests>0 ? (s.sacks.toLocaleString() + (s.sackSize? " × " + s.sackSize + " each":"")) : "—";

      // Cost outputs
      $("outSubtotal").textContent = s.sub>0 ? money(s.sub) : "$-";
      $("outAdds").textContent     = s.sub>0 ? money(s.adds) : "$-";
      $("outTotal").textContent    = s.sub>0 ? money(s.tot) : "$-";
      $("outPPP").textContent      = (s.tot>0 && s.guests>0) ? money(s.ppp) : "$-";

      // Pills
      $("pillGuests").textContent = s.guests>0 ? (s.guests + " guests total") : "-";
      $("pillSack").textContent   = s.guests>0 ? ("sack " + (s.sackSize||"-")) : "-";
      $("pillPrice").textContent  = (s.tot>0 && s.guests>0) ? ("about " + money(s.ppp) + " per person") : "pricing optional";
    }

    ["A","T","C","course","length","leftovers","appetite","sackPreset","sack","priceUnit","taxPct","fees"].forEach(id=>{
      const el=$(id); if(el){el.addEventListener("input",render); el.addEventListener("change",render);}
    });

    // Presets
    document.querySelectorAll(".preset[data-people]").forEach(btn=>{
      btn.addEventListener("click",()=>{
        const n=parseInt(btn.getAttribute("data-people"),10)||0;
        $("A").value=n; $("T").value=0; $("C").value=0;
        const a=$("A"); try{ a.focus({preventScroll:true}); a.select(); }catch(e){}
        render();
      });
    });

    // Reset
    (function attachReset(){
      const btn = $("dmReset");
      if(!btn) return;
      btn.addEventListener("click", ()=>{
        document.querySelectorAll("input, select").forEach(el=>{
          if(el.tagName==="SELECT"){
            const i=Array.from(el.options).findIndex(o=>o.defaultSelected);
            el.selectedIndex = i>=0 ? i : 0;
          } else { el.value = el.defaultValue; }
        });
        document.querySelectorAll("input, select").forEach(el=>{
          el.dispatchEvent(new Event("input",{bubbles:true}));
          el.dispatchEvent(new Event("change",{bubbles:true}));
        });
        const a=$("A"); try{ a.focus({preventScroll:true}); a.select(); }catch(e){}
        render();
      });
    })();

    // Start
    const start = () => { const a=document.getElementById("A"); try{ a.focus({preventScroll:true}); a.select(); }catch(e){} render(); };
    if (document.readyState === "loading") document.addEventListener("DOMContentLoaded", start, {once:true});
    else start();
  })();
  </script>

  <div class="muted" style="text-align:center;margin:16px 0 0 0;">
    This tool provides general portion and cost estimates for planning only. Results depend on the information you enter and typical averages. DinnerMath is not responsible for decisions, purchases, or outcomes based on these estimates.<br>
    © 2025 DinnerMath. All rights reserved. Use for planning only.
  </div>
</body>
</html>
