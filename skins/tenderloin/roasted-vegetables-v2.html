<!doctype html>
<!-- © 2025 DinnerMath — Calculator code and design are proprietary. Licensed for end-user viewing only via comesail.github.io. -->
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>DinnerMath — Roasted Vegetables Quantity Calculator (Tenderloin ultratight v1.3)</title>
  <meta name="description" content="Estimate how many pounds of raw vegetables to buy (planning estimate), plus about cooked cups and optional pricing.">
  <style>
    :root{ --ink:#111827; --muted:#6b7280; --line:#e5e7eb; --bg:#ffffff; --card:#ffffff; }
    *{box-sizing:border-box}
    html,body{margin:0;padding:0}
    body{background:var(--bg);color:var(--ink);font-family: Inter, ui-sans-serif, system-ui, -apple-system, 'Segoe UI', Roboto, Helvetica, Arial}
    .wrap{max-width:740px;margin:0 auto;padding:clamp(8px,1.6vw,14px)}
    .dm-card{background:var(--card);border:1px solid var(--line);border-radius:0;padding:10px;margin:8px 0;box-shadow:0 1px 0 rgba(17,24,39,.06),0 1px 2px rgba(17,24,39,.05)}
    h1{font-size:20px;margin:0 0 6px;text-align:center;font-weight:800}
    h3{font-size:15px;margin:0 0 6px;text-align:center;font-weight:800}
    .lede{color:var(--muted);margin:0 0 8px;text-align:center;font-size:12.5px}
    label{font-size:10.5px;color:#374151;display:block;margin:0 0 2px;font-weight:600}
    input[type=number], select{width:100%;border:1px solid #d1d5db;border-radius:7px;padding:6px 8px;font-size:12.5px;line-height:1.2;background:#fff;color:var(--ink);height:34px}
    a{color:var(--ink);text-decoration:underline}
    .row{display:grid;grid-template-columns:1fr 1fr;gap:6px}
    .row-2{display:grid;grid-template-columns:1fr 1fr;gap:8px}
    .row-1{display:grid;grid-template-columns:1fr;gap:8px}
    .guest-grid{display:grid;grid-template-columns:110px 110px 110px 1fr;gap:6px;align-items:end}
    .inline{display:flex;align-items:center;gap:6px;flex-wrap:wrap}
    .muted{color:var(--muted);font-size:11px}
    .fine{font-size:12.5px;color:#374151;line-height:1.35}
    .btn{display:inline-block;border:1.5px solid var(--ink);border-radius:999px;padding:6px 10px;font-size:12.5px;font-weight:700;text-decoration:none;color:var(--ink);cursor:pointer;background:#fff}
    .preset{border:2px solid var(--ink);background:#f8fafc;border-radius:999px;padding:5px 10px;font-size:13px;font-weight:800;cursor:pointer}
    .pill{font-size:10px;border:1px solid #d1d5db;border-radius:999px;padding:2px 6px;color:#475569;background:#fff;text-decoration:none}
    .result{border:2px solid var(--ink);padding:10px;background:#fff}
    .big{font-size:24px;font-weight:900;line-height:1.2;margin:6px 0}
    .finder{padding:8px;border:2px solid var(--ink)}
    .divider{height:1px;background:var(--line);margin:8px 0}
    .visually-hidden{position:absolute!important;clip:rect(1px,1px,1px,1px);clip-path:inset(50%);height:1px;width:1px;overflow:hidden;white-space:nowrap;border:0;padding:0;margin:-1px}
    @media (max-width:820px){ .row,.guest-grid,.row-2{grid-template-columns:1fr} }
  </style>
</head>
<body>
  <div class="wrap">

    <!-- Header -->
    <div class="dm-card" role="region" aria-label="Header">
      <h1>Roasted Vegetables — Quantity Calculator</h1>
      <p class="lede">Enter guests and settings (or tap a quick preset). We will estimate how many pounds of raw vegetables to buy (planning estimate).</p>
    </div>

    <!-- Inputs -->
    <div class="dm-card" role="region" aria-label="Inputs">
      <h3>Inputs</h3>
      <div class="guest-grid" aria-label="Guests">
        <div><label for="A">Adults</label><input id="A" type="number" min="0" step="1" value="10"></div>
        <div><label for="T">Teens</label><input id="T" type="number" min="0" step="1" value="0"></div>
        <div><label for="C">Children</label><input id="C" type="number" min="0" step="1" value="0"></div>
        <div>
          <label for="course">Course mode</label>
          <select id="course">
            <option value="side" selected>Side</option>
            <option value="buffet">Buffet or grazing</option>
            <option value="vegmain">Vegetarian main</option>
            <option value="tasting">Tasting plate</option>
          </select>
        </div>
      </div>

      <div class="row" aria-label="Context" style="margin-top:6px">
        <div>
          <label for="length">Event length</label>
          <select id="length">
            <option value="0.95">Short - about 1 to 2 hours</option>
            <option value="1.00" selected>Standard - about 2 to 3 hours</option>
            <option value="1.08">Long - about 3 to 4 hours</option>
            <option value="1.15">Extended - about 4 to 5 hours</option>
          </select>
        </div>
        <div>
          <label for="leftovers">Add leftovers</label>
          <select id="leftovers">
            <option value="1.00" selected>No</option>
            <option value="1.10">+10%</option>
            <option value="1.20">+20%</option>
          </select>
        </div>
        <div>
          <label for="appetite">Appetite</label>
          <select id="appetite">
            <option value="0.90">Light</option>
            <option value="1.00" selected>Typical</option>
            <option value="1.20">Hearty</option>
          </select>
        </div>
        <div>
          <label for="mix">Vegetable mix style</label>
          <select id="mix">
            <option value="1.00" selected>Mixed medley</option>
            <option value="1.10">Root heavy</option>
            <option value="0.90">Light greens</option>
          </select>
          <div class="muted">Mix style lightly nudges portions up or down.</div>
        </div>
      </div>

      <!-- Presets + Reset -->
      <div class="inline" style="margin-top:6px">
        <span class="muted">Quick presets:</span>
        <button class="preset" data-people="10" type="button">10</button>
        <button class="preset" data-people="25" type="button">25</button>
        <button class="preset" data-people="50" type="button">50</button>
        <button class="preset" data-people="100" type="button">100</button>
        <span class="muted">Presets set all as adults. Tweak Teens or Children if needed.</span>
        <div style="flex:1"></div>
        <button id="dmReset" type="button" class="btn">Reset</button>
      </div>
    </div>

    <!-- Micro-summary (outside cards, muted) -->
    <div class="muted" id="micro" style="margin:6px 0 0 0">-</div>

    <!-- Results -->
    <div class="dm-card" role="region" aria-label="Results" aria-live="polite" aria-atomic="true">
      <h3>Results (estimate)</h3>
      <div class="result">
        <div class="muted" aria-hidden="true">Estimated pounds of raw vegetables to buy</div>
        <div id="outBig" class="big" aria-label="Estimated pounds to buy: 0">-</div>
        <div class="fine" id="outFrom">-</div>
        <div class="fine" id="outExplain">Enter your guest mix to calculate.</div>
        <div class="divider"></div>
        <div class="inline">
          <span class="pill" id="pillGuests">-</span>
          <span class="pill" id="pillMix">-</span>
          <span class="pill" id="pillPrice">pricing optional</span>
        </div>
      </div>

      <div class="row-2" style="margin-top:10px">
        <div class="dm-card" style="margin:0">
          <h3>Cost estimate</h3>
          <div class="inline">
            <div><label>Subtotal</label><div id="outSubtotal" class="fine">$-</div></div>
            <div><label>Tax and fees</label><div id="outAdds" class="fine">$-</div></div>
            <div><label>Estimated total</label><div id="outTotal" class="fine">$-</div></div>
            <div><label>Per person</label><div id="outPPP" class="fine">$-</div></div>
          </div>
        </div>
        <div class="dm-card finder" role="region" aria-label="Find near me" style="margin:0">
          <div class="inline">
            <a class="btn" href="#" onclick="try{window.open('https://www.google.com/maps/search/vegetables+near+me','_blank');}catch(e){location.href='https://www.google.com/maps/search/vegetables+near+me';}return false;">Find vegetables near me</a>
            <a class="pill" href="#" onclick="try{window.open('https://www.google.com/maps/search/produce+market','_blank');}catch(e){location.href='https://www.google.com/maps/search/produce+market';}return false;">Produce markets</a>
            <a class="pill" href="#" onclick="try{window.open('https://www.google.com/maps/search/grocery+store','_blank');}catch(e){location.href='https://www.google.com/maps/search/grocery+store';}return false;">Grocery stores</a>
          </div>
        </div>
      </div>
    </div>

    <!-- Hidden raw amount holder to preserve ID (not displayed) -->
    <div id="outRaw" class="visually-hidden" aria-hidden="true"></div>

    <!-- Pricing (optional) -->
    <div class="dm-card" role="region" aria-label="Pricing">
      <h3>Pricing (optional)</h3>
      <div class="row-2">
        <div>
          <label for="priceUnit">Unit price — per pound raw (US dollars)</label>
          <input id="priceUnit" type="number" min="0" step="0.01" placeholder="e.g., 2.29">
        </div>
        <div>
          <label for="taxPct">Sales tax (percent)</label>
          <input id="taxPct" type="number" min="0" step="0.1" placeholder="e.g., 7.5">
        </div>
      </div>
      <div class="row-1" style="margin-top:8px">
        <div>
          <label for="fees">Extra fees (US dollars)</label>
          <input id="fees" type="number" min="0" step="0.01" placeholder="e.g., 10.00">
        </div>
      </div>
      <div class="muted">Cost = rounded raw pounds × unit price + tax + fees.</div>
    </div>

  </div>

  <script>
  (function(){
    const $=id=>document.getElementById(id);
    const N=(v,d=0)=>{const n=parseFloat(v);return isFinite(n)?n:d;};
    const money=n=>(isFinite(n)&&n>=0)?"$"+n.toFixed(2):"$-";

    function courseMult(c){
      if(c==="buffet") return 1.15;
      if(c==="vegmain") return 1.60;
      if(c==="tasting") return 0.70;
      return 1.00;
    }
    function lenMult(v){return (v==1.15?1.15:(v==1.08?1.08:(v==0.95?0.95:1.00)));}
    function mixMult(v){return (v==1.10?1.10:(v==0.90?0.90:1.00));}

    function perPersonCooked(){
      const c = $("course").value;
      let adult = 4, child = 3;
      if(c==="buffet"){ adult = 4.5; child = 3.5; }
      if(c==="vegmain"){ adult = 9; child = 7; }
      if(c==="tasting"){ adult = 3; child = 2; }
      const teen = adult;
      return {adult, teen, child};
    }

    function compute(){
      const A=N($("A").value,0), T=N($("T").value,0), C=N($("C").value,0);
      const guests=A+T+C;

      const appet=N($("appetite").value,1.0);
      const length=N($("length").value,1.0);
      const leftover=N($("leftovers").value,1.0);
      const mixV=N($("mix").value,1.0);

      const pp = perPersonCooked();
      let cookedOz = (A*pp.adult + T*pp.teen + C*pp.child);
      cookedOz *= appet * courseMult($("course").value) * lenMult(length) * mixMult(mixV);
      cookedOz *= leftover;

      const cookedLb = cookedOz/16;
      const cups = cookedLb * 2.5;
      const rawLb = cookedLb / 0.80;

      const roundedRaw = Math.ceil(Math.max(0, rawLb));
      const price = N($("priceUnit").value,0);
      const tax = N($("taxPct").value,0)/100;
      const fees = N($("fees").value,0);

      const subtotal = roundedRaw * price;
      const adds = subtotal*tax + (fees>0?fees:0);
      const total = subtotal + adds;
      const ppp = (guests>0 && total>0) ? total/guests : NaN;

      return {guests, roundedRaw, cups, subtotal, adds, total, ppp};
    }

    function microSummary(s){
      const courseTxt = ($("course").selectedOptions[0]||{}).text.toLowerCase();
      const appetiteTxt = ($("appetite").selectedOptions[0]||{}).text.toLowerCase();
      const lengthTxt = ($("length").selectedOptions[0]||{}).text.toLowerCase();
      const leftoversTxt = ($("leftovers").selectedOptions[0]||{}).text.toLowerCase();
      const mixTxt = ($("mix").selectedOptions[0]||{}).text.toLowerCase();
      return (s.guests||0)+" guests • "+courseTxt+" • "+appetiteTxt+" appetite • "+lengthTxt+" • leftovers "+leftoversTxt+" • "+mixTxt;
    }

    function render(){
      const s=compute();

      if(s.guests>0){
        $("outBig").textContent = "About " + s.roundedRaw + " lb raw vegetables";
        $("outBig").setAttribute("aria-label","Estimated pounds to buy: " + s.roundedRaw);
        $("outFrom").textContent =
          "Estimated from " + s.guests + " guests - " +
          ($("course").selectedOptions[0]||{}).text.toLowerCase() + ", " +
          ($("appetite").selectedOptions[0]||{}).text.toLowerCase() + " appetite, " +
          ($("length").selectedOptions[0]||{}).text.toLowerCase() + ", leftovers " +
          ($("leftovers").selectedOptions[0]||{}).text.toLowerCase() + ".";
        const cups = Math.ceil(s.cups);
        $("outExplain").textContent = "About " + cups + " cups cooked for serving.";
        $("pillGuests").textContent = s.guests + " guests total";
        $("pillMix").textContent = ($("mix").selectedOptions[0]||{}).text.toLowerCase();
        $("pillPrice").textContent = (s.total>0 && s.guests>0) ? ("about " + money(s.total/s.guests) + " per person") : "pricing optional";
      }else{
        ["outBig","outFrom","outExplain","pillGuests","pillMix"].forEach(id=>$(id).textContent="-");
        $("outBig").setAttribute("aria-label","Estimated pounds to buy: 0");
        $("pillPrice").textContent = "pricing optional";
      }

      // Costs + summary
      $("micro").textContent = microSummary(s);
      document.getElementById("outRaw").textContent = s.roundedRaw + " lb raw vegetables";
      $("outSubtotal").textContent = s.subtotal>0 ? money(s.subtotal) : "$-";
      $("outAdds").textContent     = s.subtotal>0 ? money(s.adds) : "$-";
      $("outTotal").textContent    = s.subtotal>0 ? money(s.total) : "$-";
      $("outPPP").textContent      = (s.total>0 && s.guests>0) ? money(s.ppp) : "$-";
    }

    // Select-all on focus/click for A/T/C
    ["A","T","C"].forEach(id=>{
      const el=$(id);
      if(!el) return;
      function sel(){el.select();}
      el.addEventListener("focus", sel);
      el.addEventListener("click", sel);
    });

    ["A","T","C","course","length","leftovers","appetite","mix","priceUnit","taxPct","fees"].forEach(id=>{
      const el=$(id); if(el){ el.addEventListener("input",render); el.addEventListener("change",render); }
    });

    (function attachReset(){
      const btn=document.getElementById("dmReset"); if(!btn) return;
      btn.addEventListener("click", ()=>{
        document.querySelectorAll("input, select").forEach(el=>{
          if(el.tagName==="SELECT"){
            const i=Array.from(el.options).findIndex(o=>o.defaultSelected);
            el.selectedIndex = i>=0 ? i : 0;
          } else { el.value = el.defaultValue; }
        });
        document.querySelectorAll("input, select").forEach(el=>{
          el.dispatchEvent(new Event("input",{bubbles:true}));
          el.dispatchEvent(new Event("change",{bubbles:true}));
        });
        render();
      });
    })();

    render();
  })();
  </script>

  <!-- Legal footer -->
  <div class="muted" style="text-align:center;margin:12px 0 0 0;">
    This tool provides general portion and cost estimates for planning only. Results depend on the information you enter and typical averages.
    DinnerMath is not responsible for decisions, purchases, or outcomes based on these estimates.<br>
    © 2025 DinnerMath. All rights reserved. Use for planning only.
  </div>
</body>
</html>
