<!doctype html>
<!-- © 2025 DinnerMath — Calculator code and design are proprietary.
     Licensed for end-user viewing only via comesail.github.io. -->
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>DinnerMath — Cheesecake Quantity Calculator (Tenderloin ultratight)</title>
<meta name="description" content="How many cheesecake slices per person and how many cakes to buy? Fast estimates with optional pricing.">
<style>
  :root{ --ink:#111827; --muted:#6b7280; --line:#e5e7eb; --bg:#ffffff; --card:#ffffff; }
  *{box-sizing:border-box}
  html,body{margin:0;padding:0}
  body{background:var(--bg);color:var(--ink);font-family:"Inter",ui-sans-serif,system-ui,-apple-system,"Segoe UI",Roboto,Helvetica,Arial}
  .wrap{max-width:740px;margin:0 auto;padding:clamp(8px,1.6vw,14px)}
  .dm-card{background:var(--card);border:1px solid var(--line);border-radius:0px;padding:10px;margin:8px 0;box-shadow:0 1px 0 rgba(17,24,39,.06),0 1px 2px rgba(17,24,39,.05)}
  h1{font-size:20px;margin:0 0 6px;text-align:center;font-weight:800}
  h3{font-size:15px;margin:0 0 6px;text-align:center;font-weight:800}
  .lede{color:var(--muted);margin:0 0 8px;text-align:center;font-weight:400;font-size:12.5px}
  .row{display:grid;grid-template-columns:1fr 1fr;gap:6px}
  @media (max-width:820px){.row{grid-template-columns:1fr}}
  label{font-size:10.5px;color:#374151;display:block;margin:0 0 2px;font-weight:600;text-align:left}
  input[type="number"],select{width:100%;border:1px solid #d1d5db;border-radius:7px;padding:6px 8px;font-size:12.5px;line-height:1.2;background:#fff;color:var(--ink)}
  .muted{color:var(--muted);font-size:11px}
  .fine{font-size:12.5px;color:#374151;line-height:1.35}
  .inline{display:flex;align-items:center;gap:6px;flex-wrap:wrap}
  .divider{height:1px;background:var(--line);margin:8px 0}
  .btn{display:inline-block;border:1.5px solid var(--ink);border-radius:999px;padding:6px 10px;font-size:12.5px;font-weight:700;text-decoration:none;color:var(--ink);cursor:pointer;background:#fff}
  .btn:hover{background:#f3f4f6}
  .pill{font-size:10px;border:1px solid #d1d5db;border-radius:999px;padding:2px 6px;color:#475569;background:#fff;text-decoration:none}
  .preset{border:2px solid var(--ink);background:#f8fafc;border-radius:999px;padding:5px 10px;font-size:13px;font-weight:800;cursor:pointer}
  .preset:hover{background:#eef2f7}
  .result{border:2px solid var(--ink);border-radius:0px;padding:10px;margin-top:6px;background:#fff}
  .result .big{font-size:24px;font-weight:800;line-height:1.2;color:var(--ink);font-variant-numeric:tabular-nums}
  .finder{padding:8px;border-radius:0px;border:2px solid var(--ink);background:#fff}
  .visually-hidden{position:absolute!important;clip:rect(1px,1px,1px,1px);clip-path:inset(50%);height:1px;width:1px;overflow:hidden;white-space:nowrap;border:0;padding:0;margin:-1px}
  [aria-label="Guests"]{display:flex;flex-wrap:wrap;gap:6px;align-items:flex-end}
  [aria-label="Guests"]>div{flex:0 0 auto}
  #A,#T,#C{width:110px}
  [aria-label="Guests"]>div:nth-child(4){flex:1 1 240px;min-width:220px}
  .row-2{display:grid;grid-template-columns:1fr 1fr;gap:10px}
  @media (max-width:820px){ .row-2{grid-template-columns:1fr} }
  a, a:visited{color:var(--ink)}
</style>
</head>
<body class="ultra">
  <div class="wrap" id="cheesecake">

    <div class="dm-card" role="region" aria-label="Header">
      <h1>Cheesecake Quantity Calculator — Slices & Cakes</h1>
      <p class="lede">
        Enter guests and settings (or tap a quick preset). We will estimate how many <strong>cheesecake slices</strong> to plan and how many <strong>cakes</strong> to buy (planning estimate).
      </p>
    </div>

    <div class="dm-card" role="region" aria-label="Inputs">
      <h3>Inputs</h3>
      <div class="row" aria-label="Guests">
        <div><label for="A">Adults</label><input id="A" type="number" min="0" step="1" inputmode="numeric" value="10" autofocus></div>
        <div><label for="T">Teens</label><input id="T" type="number" min="0" step="1" inputmode="numeric" value="0"></div>
        <div><label for="C">Children</label><input id="C" type="number" min="0" step="1" inputmode="numeric" value="0"></div>
        <div>
          <label for="course">Course mode</label>
          <select id="course">
            <option value="main" selected>Main dessert</option>
            <option value="mixed">Dessert buffet</option>
            <option value="app">Mini-sweets</option>
          </select>
        </div>
      </div>

      <div class="row" aria-label="Context">
        <div>
          <label for="style">Cake style</label>
          <select id="style">
            <option value="std" selected>Standard 9 inch (about 12 slices)</option>
            <option value="mini">Mini 4 inch (about 4 slices)</option>
            <option value="sheet">Sheet pan (about 48 slices)</option>
          </select>
          <div class="muted">We convert slices to cakes using your style’s typical yield.</div>
        </div>
        <div>
          <label for="appetite">Appetite</label>
          <select id="appetite">
            <option value="0.90">Light</option>
            <option value="1.00" selected>Typical</option>
            <option value="1.20">Hearty</option>
          </select>
        </div>
        <div>
          <label for="length">Event length</label>
          <select id="length">
            <option value="0.95">Short — about 1 to 2 hours</option>
            <option value="1.00" selected>Standard — about 2 to 3 hours</option>
            <option value="1.08">Long — about 3 to 4 hours</option>
            <option value="1.15">Extended — about 4 to 5 hours</option>
          </select>
        </div>
        <div>
          <label for="leftovers">Add leftovers</label>
          <select id="leftovers">
            <option value="1.00" selected>No</option>
            <option value="1.10">+10%</option>
            <option value="1.20">+20%</option>
          </select>
        </div>
      </div>

      <div class="inline" style="margin-top:6px">
        <span class="muted">Quick presets:</span>
        <button class="preset" data-people="10" type="button">10</button>
        <button class="preset" data-people="25" type="button">25</button>
        <button class="preset" data-people="50" type="button">50</button>
        <button class="preset" data-people="100" type="button">100</button>
        <span class="muted">Presets set all as adults. Tweak Teens and Children if needed.</span>
        <div style="flex:1"></div>
        <button id="dmReset" type="button" class="btn">Reset</button>
      </div>
    </div>

    <div class="muted" id="outMicro" style="margin:6px 0 0 0">-</div>

    <div class="dm-card" role="region" aria-label="Results" aria-live="polite" aria-atomic="true">
      <h3>Results (estimate)</h3>
      <div class="result">
        <div class="muted" aria-hidden="true">Estimated cakes to buy</div>
        <div class="big" id="outBig" aria-label="No estimate yet">-</div>
        <div class="fine" id="outFromTL">-</div>
        <div class="fine muted" id="outBatchNote"></div>
        <div class="fine" id="outFrom" style="display:none">-</div>
        <div class="fine" id="outExplainTL">-</div>
        <div class="fine" id="outExplain" style="display:none">Enter your guest mix to calculate.</div>
        <div class="divider"></div>
        <div class="inline">
          <span class="pill" id="pillGuests">-</span>
          <span class="pill" id="pillStyle">-</span>
          <span class="pill" id="pillSlices">-</span>
          <span class="pill" id="pillPrice">pricing optional</span>
        </div>
      </div>
      <span id="outGuests" class="visually-hidden">—</span>
      <span id="outSlices" class="visually-hidden">—</span>
      <span id="outCakes" class="visually-hidden">—</span>
      <span id="outSubtotal" class="visually-hidden">$—</span>
      <span id="outAdds" class="visually-hidden">$—</span>
      <span id="outTotal" class="visually-hidden">$—</span>
      <span id="outPPP" class="visually-hidden">$—</span>

      <div class="row-2" style="margin-top:10px">
        <div class="dm-card" style="margin:0">
          <h3>Cost estimate</h3>
          <div class="inline">
            <div><label>Subtotal</label><div id="costSubtotal" class="fine">$—</div></div>
            <div><label>Tax and fees</label><div id="costAdds" class="fine">$—</div></div>
            <div><label>Estimated total</label><div id="costTotal" class="fine">$—</div></div>
            <div><label>Per person</label><div id="costPPP" class="fine">$—</div></div>
          </div>
        </div>
        <div class="dm-card finder" role="region" aria-label="Find near me" style="margin:0">
          <div class="inline">
            <a class="btn" href="#" onclick="try{window.open('https://www.google.com/maps/search/cheesecake+near+me','_blank');}catch(e){location.href='https://www.google.com/maps/search/cheesecake+near+me';}return false;">Find cheesecake near me</a>
            <a class="pill" href="#" onclick="try{window.open('https://www.google.com/maps/search/bakery','_blank');}catch(e){location.href='https://www.google.com/maps/search/bakery';}return false;">Bakeries</a>
            <a class="pill" href="#" onclick="try{window.open('https://www.google.com/maps/search/grocery+store','_blank');}catch(e){location.href='https://www.google.com/maps/search/grocery+store';}return false;">Grocery stores</a>
          </div>
        </div>
      </div>
    </div>

    <div class="dm-card" role="region" aria-label="Pricing">
      <h3>Pricing (optional)</h3>
      <div class="row">
        <div><label for="priceUnit">Unit price (US dollars per cake)</label><input id="priceUnit" type="number" min="0" step="0.01" inputmode="decimal" placeholder="e.g., 24.00"></div>
        <div><label for="taxPct">Sales tax (percent)</label><input id="taxPct" type="number" min="0" step="0.1" inputmode="decimal" placeholder="e.g., 7.5"></div>
        <div><label for="fees">Extra fees (US dollars)</label><input id="fees" type="number" min="0" step="0.01" inputmode="decimal" placeholder="e.g., 8.00"></div>
      </div>
      <div class="muted">Cost = rounded cakes × price + tax + extra fees.</div>
    </div>

  </div>

  <script>
  (function(){
    const $ = id => document.getElementById(id);
    const N = (v,d=0)=>{const n=parseFloat(v);return isFinite(n)?n:d;};
    const money = n => (isFinite(n)&&n>=0) ? "$"+n.toFixed(2) : "$—";
    const fmt = (n,d=0)=> isFinite(n) ? n.toLocaleString(undefined,{minimumFractionDigits:d,maximumFractionDigits:d}) : "—";
    const roundInt = x => Math.round(x);

    function styleSlices(style){
      if(style==="mini") return 4;
      if(style==="sheet") return 48;
      return 12; // standard
    }
    function courseMult(c){ if(c==="main") return 1.00; if(c==="mixed") return 0.75; return 0.50; }
    function lenMult(v){ if(v==1.15) return 1.15; if(v==1.08) return 1.08; if(v==0.95) return 0.95; return 1.00; }

    function compute(){
      const A=N($("A").value,0), T=N($("T").value,0), C=N($("C").value,0);
      const guests = A+T+C;

      const course = $("course").value;
      const style = $("style").value;
      const appetite = N($("appetite").value,1.0);
      const length   = N($("length").value,1.0);
      const leftovers= N($("leftovers").value,1.0);

      const base = {adult:1.0, teen:0.8, child:0.6}; // slices per adult baseline
      let slices = (A*base.adult + T*base.teen + C*base.child);
      slices *= courseMult(course) * appetite * lenMult(length) * leftovers;

      const perCake = styleSlices(style);
      const cakes = Math.max(0, Math.ceil(Math.max(0, slices) / perCake));

      // Pricing
      const price = N($("priceUnit").value,0);
      const tax   = N($("taxPct").value,0)/100;
      const fees  = N($("fees").value,0);

      const subtotal = (price>0 && cakes>0) ? cakes * price : 0;
      const adds = subtotal * tax + (fees>0?fees:0);
      const total = subtotal + adds;
      const ppp = (guests>0 && total>0) ? total/guests : NaN;

      return {guests, slices, cakes, subtotal, adds, total, ppp, course, style};
    }

    
  function updateBatchNoteCake(s){
    const noteEl = document.getElementById("outBatchNote");
    if (!noteEl) return;
    noteEl.textContent = "";

    const sel = (document.getElementById("style")||{}).selectedOptions?.[0];
    const txt = sel ? sel.text : "";
    const m = /about\s*([\d.]+)\s*slices/i.exec(txt);
    const slicesPerCake = m ? parseFloat(m[1]) : NaN;

    const needSlices = Math.round(s.slices || 0);
    const cakes = s.cakes || 0;
    const totalSlices = (isFinite(slicesPerCake) && cakes>0) ? slicesPerCake * cakes : 0;

    if (cakes === 1 && isFinite(slicesPerCake) && (slicesPerCake >= needSlices*1.2 || (slicesPerCake - needSlices) >= 2)) {
      const name = (txt.split(" (")[0] || "cake").toLowerCase();
      noteEl.textContent =
        "Minimum batch size: one " + name + " (about " + (Math.round(slicesPerCake*100)/100) +
        " slices) is larger than you need — leftovers expected.";
      return;
    }

    if (cakes >= 2 && isFinite(totalSlices) && (totalSlices >= needSlices*1.3 || (totalSlices - needSlices) >= 5)) {
      noteEl.textContent =
        "Heads up: " + cakes + " " + (cakes===1?"cake":"cakes") + " (about " + (Math.round(totalSlices*100)/100) +
        " slices) is above what you need (" + needSlices + " slices). Consider a smaller class or mixing sizes.";
    }
  }

function render(){
      const s = compute();

      const styleTxt = s.style==="mini" ? "mini 4 inch"
                      : s.style==="sheet" ? "sheet pan"
                      : "standard 9 inch";

      const courseTxt = s.course==="main" ? "main dessert"
                        : s.course==="mixed" ? "dessert buffet"
                        : "mini-sweets";

      $("outGuests").textContent = s.guests>0 ? s.guests.toString() : "—";
      $("outSlices").textContent = s.guests>0 ? (Math.round(s.slices)).toLocaleString() : "—";
      $("outCakes").textContent  = s.guests>0 ? s.cakes.toLocaleString() : "—";
      $("outSubtotal").textContent = s.subtotal>0 ? money(s.subtotal) : "$—";
      $("outAdds").textContent     = s.subtotal>0 ? money(s.adds) : "$—";
      $("outTotal").textContent    = s.subtotal>0 ? money(s.total) : "$—";
      $("outPPP").textContent      = (s.total>0 && s.guests>0) ? money(s.ppp) : "$—";
      $("outExplain").textContent = "We count about one slice per guest; children count as half.";
      updateBatchNoteCake(s);
    }

    ["A","T","C","course","style","appetite","length","leftovers","priceUnit","taxPct","fees"].forEach(id=>{
      const el = $(id);
      if(el){ el.addEventListener("input",render); el.addEventListener("change",render); }
    });

    // Presets
    document.querySelectorAll(".preset[data-people]").forEach(btn=>{
      btn.addEventListener("click",()=>{
        const n = parseInt(btn.getAttribute("data-people"),10)||0;
        $("A").value = n; $("T").value = 0; $("C").value = 0; render();
      });
    });

    // Reset
    (function attachReset(){
      const btn = $("dmReset");
      if(!btn) return;
      btn.addEventListener("click", ()=>{
        document.querySelectorAll("input, select").forEach(el=>{
          if(el.tagName==="SELECT"){
            const i = Array.from(el.options).findIndex(o=>o.defaultSelected);
            el.selectedIndex = i>=0 ? i : 0;
          } else { el.value = el.defaultValue; }
        });
        document.querySelectorAll("input, select").forEach(el=>{
          el.dispatchEvent(new Event("input",{bubbles:true}));
          el.dispatchEvent(new Event("change",{bubbles:true}));
        });
        render();
      });
    })();

    render(); // initial
  })();
  </script>

  <script>
  (function(){
    const $ = id => document.getElementById(id);
    const txt = el => (el && el.textContent) ? el.textContent.trim() : "";
    const val = el => (el && el.value!=null) ? el.value : "";

    function micro(){
      const A = parseFloat(val($("A"))||"0")||0;
      const T = parseFloat(val($("T"))||"0")||0;
      const C = parseFloat(val($("C"))||"0")||0;
      const guests = A+T+C;
      const courseTxt = ($("course")?.selectedOptions[0]?.text||"").toLowerCase();
      const styleTxt  = ($("style")?.selectedOptions[0]?.text||"").split(" (")[0].toLowerCase();
      const appTxt    = ($("appetite")?.selectedOptions[0]?.text||"").toLowerCase();
      const lenTxt    = ($("length")?.selectedOptions[0]?.text||"").toLowerCase();
      const leftTxt   = ($("leftovers")?.selectedOptions[0]?.text||"").toLowerCase();
      $("outMicro").textContent = guests>0
        ? (guests + " guests • " + courseTxt + " • " + styleTxt + " • " + appTxt + " appetite • " + lenTxt + " • leftovers " + leftTxt)
        : "-";
      $("pillGuests").textContent = guests>0 ? (guests + " guests total") : "-";
      $("pillStyle").textContent = guests>0 ? styleTxt : "-";
      const slices = txt($("outSlices"));
      $("pillSlices").textContent = (guests>0 && slices && slices!=='—') ? (slices + " slices") : "-";
    }

    
    function buildFromLine(){
      const $ = id => document.getElementById(id);
      const val = el => (el && el.value!=null) ? el.value : "";
      const txtOpt = (id)=>{ const el=$(id); return el && el.selectedOptions && el.selectedOptions[0] ? el.selectedOptions[0].text.trim() : ""; };

      const A = parseFloat(val($("A"))||"0")||0;
      const T = parseFloat(val($("T"))||"0")||0;
      const C = parseFloat(val($("C"))||"0")||0;
      const guests = A+T+C;

      const courseTxt = txtOpt("course").toLowerCase();                  // e.g., "main dessert"
      const styleTxt  = txtOpt("style").toLowerCase();                   // e.g., "standard 9 inch (about 12 slices)"
      const appetite  = txtOpt("appetite").toLowerCase();                // e.g., "typical"
      const length    = txtOpt("length").toLowerCase();                  // e.g., "standard — about 2 to 3 hours"
      const leftovers = txtOpt("leftovers").toLowerCase();               // e.g., "no"

      const line = guests>0
        ? ("Estimated from " + guests + " guests - " + courseTxt + ", " + styleTxt + ", " + appetite + " appetite, " + length + ", leftovers " + leftovers + ".")
        : "-";

      const target = document.getElementById("outFromTL") || document.getElementById("outFrom");
      if (target) target.textContent = line;
    }


    function mirror(){
      const cakes = txt($("outCakes"));
      const n = cakes.replace(/[^0-9]/g,"");
      const big = $("outBig");
      if(big){
        big.textContent = cakes && cakes!=='—' ? (cakes + " cakes") : "-";
        big.setAttribute("aria-label", (n ? ("Estimated cakes to buy: " + n) : "No estimate yet"));
      }
      const map = [["outSubtotal","costSubtotal"],["outAdds","costAdds"],["outTotal","costTotal"],["outPPP","costPPP"]];
      map.forEach(([from,to])=>{ const v = txt($(from)); const el=$(to); if(el){ el.textContent = v || "$—"; } });
    }

    function fixPhrase(){
      const ex = document.getElementById('outExplain');
      if(!ex) return;
      const t = ex.textContent || '';
      if(/^\s*Auto-calculated from/i.test(t)){ ex.textContent = t.replace(/^\s*Auto-calculated from/i, 'Estimated from'); }
    }

    const ids = ["outSlices","outCakes","outGuests","outSubtotal","outAdds","outTotal","outPPP"];
    const mo = new MutationObserver(()=>{ mirror(); micro(); fixPhrase(); buildFromLine(); });
    ids.forEach(id=>{ const el=$(id); if(el){ mo.observe(el, {childList:true, characterData:true, subtree:true}); } });

    ["A","T","C"].forEach(id=>{ const el=$(id); if(!el) return;
      el.addEventListener("focus", ()=>{ try{ el.select(); }catch(e){} });
      el.addEventListener("mousedown", (e)=>{ if(document.activeElement!==el){ e.preventDefault(); el.focus(); try{ el.select(); }catch(_){} } });
    });

    ["A","T","C","course","style","appetite","length","leftovers","priceUnit","taxPct","fees"].forEach(id=>{ const el=$(id); if(el){ ["input","change"].forEach(ev=>el.addEventListener(ev, ()=>{ micro(); mirror(); fixPhrase(); buildFromLine(); buildFromLine(); })); } });

    micro(); mirror(); fixPhrase(); buildFromLine();
  })();
  </script>

  <div class="muted" style="text-align:center;margin:16px 0 0 0;">
    This tool provides general portion and cost estimates for planning only. Results depend on the information you enter and typical averages. DinnerMath is not responsible for decisions, purchases, or outcomes based on these estimates.<br>
    © 2025 DinnerMath. All rights reserved. Use for planning only.
  </div>

<script>
// Robust select-all behavior for number inputs (Adults/Teens/Children)
(function(){
  function wire(id){
    var el = document.getElementById(id);
    if(!el || el._dmSelectAll) return;
    el._dmSelectAll = true;
    function doSelect(){ try{ el.select(); }catch(e){} }
    el.addEventListener("focus", function(){ setTimeout(doSelect, 0); });
    el.addEventListener("click", function(){ doSelect(); });
    el.addEventListener("mouseup", function(e){ e.preventDefault(); });
    el.addEventListener("touchend", function(e){ try{ el.select(); }catch(_){ } });
  }
  function start(){
    ["A","T","C"].forEach(wire);
    try{
      var a = document.getElementById("A");
      if(a){ a.focus({preventScroll:true}); a.select(); }
    }catch(_){}
  }
  if(document.readyState === "loading"){
    document.addEventListener("DOMContentLoaded", start, {once:true});
  } else {
    start();
  }
})();
</script>

</body>
</html>
