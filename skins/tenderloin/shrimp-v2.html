<!doctype html>
<!-- © 2025 DinnerMath — Calculator code and design are proprietary.
     Licensed for end-user viewing only via comesail.github.io. -->
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>DinnerMath — Shrimp Quantity Calculator (Tenderloin ultratight)</title>
<meta name="description" content="How many shrimp per person? Estimate an about shrimp count and raw pounds to buy, with optional pricing and quick presets.">
<style>
  :root{ --ink:#111827; --muted:#6b7280; --line:#e5e7eb; --bg:#ffffff; --card:#ffffff; }
  *{box-sizing:border-box}
  html,body{margin:0;padding:0}
  body{background:var(--bg);color:var(--ink);font-family:"Inter",ui-sans-serif,system-ui,-apple-system,"Segoe UI",Roboto,Helvetica,Arial}
  .wrap{max-width:740px;margin:0 auto;padding:clamp(8px,1.6vw,14px)}
  .dm-card{background:var(--card);border:1px solid var(--line);border-radius:0px;padding:10px;margin:8px 0;box-shadow:0 1px 0 rgba(17,24,39,.06),0 1px 2px rgba(17,24,39,.05)}
  h1{font-size:20px;margin:0 0 6px;text-align:center;font-weight:800}
  h3{font-size:15px;margin:0 0 6px;text-align:center;font-weight:800}
  .lede{color:var(--muted);margin:0 0 8px;text-align:center;font-weight:400;font-size:12.5px}
  .row{display:grid;grid-template-columns:1fr 1fr;gap:6px}
  @media (max-width:820px){.row{grid-template-columns:1fr}}
  label{font-size:10.5px;color:#374151;display:block;margin:0 0 2px;font-weight:600;text-align:left}
  input[type="number"],select{width:100%;border:1px solid #d1d5db;border-radius:7px;padding:6px 8px;font-size:12.5px;line-height:1.2;background:#fff;color:var(--ink)}
  .muted{color:var(--muted);font-size:11px}
  .fine{font-size:12.5px;color:#374151;line-height:1.35}
  .inline{display:flex;align-items:center;gap:6px;flex-wrap:wrap}
  .divider{height:1px;background:var(--line);margin:8px 0}
  .btn{display:inline-block;border:1.5px solid var(--ink);border-radius:999px;padding:6px 10px;font-size:12.5px;font-weight:700;text-decoration:none;color:var(--ink);cursor:pointer;background:#fff}
  .btn:hover{background:#f3f4f6}
  .btn:focus-visible, .preset:focus-visible{outline:3px solid #94a3b8;outline-offset:2px}
  .pill{font-size:10px;border:1px solid #d1d5db;border-radius:999px;padding:2px 6px;color:#475569;background:#fff;text-decoration:none}
  .preset{border:2px solid var(--ink);background:#f8fafc;border-radius:999px;padding:5px 10px;font-size:13px;font-weight:800;cursor:pointer}
  .preset:hover{background:#eef2f7}
  .result{border:2px solid var(--ink);border-radius:0px;padding:10px;margin-top:6px;background:#fff}
  .result .big{font-size:24px;font-weight:800;line-height:1.2;color:var(--ink);font-variant-numeric:tabular-nums}
  .finder{padding:8px;border-radius:0px;border:2px solid var(--ink);background:#fff}
  .visually-hidden{position:absolute!important;clip:rect(1px,1px,1px,1px);clip-path:inset(50%);height:1px;width:1px;overflow:hidden;white-space:nowrap;border:0;padding:0;margin:-1px}
  [aria-label="Guests"]{display:flex;flex-wrap:wrap;gap:6px;align-items:flex-end}
  [aria-label="Guests"]>div{flex:0 0 auto}
  #A,#T,#C{width:110px}
  [aria-label="Guests"]>div:nth-child(4){flex:1 1 240px;min-width:220px}
  .row-2{display:grid;grid-template-columns:1fr 1fr;gap:10px}
  @media (max-width:820px){ .row-2{grid-template-columns:1fr} }
  a, a:visited{color:var(--ink)}
</style>
</head>
<body class="ultra">
  <div class="wrap" id="shrimp">

    <!-- Header -->
    <div class="dm-card" role="region" aria-label="Header">
      <h1>Shrimp Quantity Calculator — How Many to Buy</h1>
      <p class="lede">
        Enter guests and settings (or tap a quick preset). We will estimate <strong>how many shrimp</strong> to buy and show the <strong>raw pounds</strong> (planning estimate).
      </p>
    </div>

    <!-- Inputs -->
    <div class="dm-card" role="region" aria-label="Inputs">
      <h3>Inputs</h3>
      <div class="row" aria-label="Guests">
        <div><label for="A">Adults</label><input id="A" type="number" min="0" step="1" inputmode="numeric" value="10" autofocus></div>
        <div><label for="T">Teens</label><input id="T" type="number" min="0" step="1" inputmode="numeric" value="0"></div>
        <div><label for="C">Children</label><input id="C" type="number" min="0" step="1" inputmode="numeric" value="0"></div>
        <div>
          <label for="course">Course mode</label>
          <select id="course">
            <option value="main" selected>Main dish</option>
            <option value="mixed">Mixed buffet</option>
            <option value="app">Appetizer/snack</option>
          </select>
        </div>
      </div>

      <div class="row" aria-label="Context">
        <div>
          <label for="length">Event length</label>
          <select id="length">
            <option value="0.95">Short - about 1 to 2 hours</option>
            <option value="1.00" selected>Standard - about 2 to 3 hours</option>
            <option value="1.08">Long - about 3 to 4 hours</option>
            <option value="1.15">Extended - about 4 to 5 hours</option>
          </select>
        </div>
        <div>
          <label for="leftovers">Add leftovers</label>
          <select id="leftovers">
            <option value="1.00" selected>No</option>
            <option value="1.10">+10%</option>
            <option value="1.20">+20%</option>
          </select>
        </div>
        <div>
          <label for="appetite">Appetite</label>
          <select id="appetite">
            <option value="0.90">Light</option>
            <option value="1.00" selected>Typical</option>
            <option value="1.20">Hearty</option>
          </select>
        </div>
        <div>
          <label for="form">Shrimp form</label>
          <select id="form">
            <option value="shell" selected>Shell-on (raw)</option>
            <option value="peeled">Peeled & deveined (raw)</option>
            <option value="cooked">Cooked, peeled (ready-to-eat)</option>
          </select>
          <div class="muted">We adjust for shell yield by form.</div>
        </div>
        <div>
          <label for="sizePreset">Size preset (count per lb)</label>
          <select id="sizePreset">
            <option value="18">Jumbo — about 16–20 per lb</option>
            <option value="23" selected>Large — about 21–25 per lb</option>
            <option value="28">Medium — about 26–30 per lb</option>
            <option value="35">Small — about 31–40 per lb</option>
            <option value="custom">Custom (enter count per lb)</option>
          </select>
          <div class="muted">Choose a labeled size or custom to enter your own count per pound.</div>
        </div>
        <div id="cplWrap" class="">
          <label for="cpl">Custom count per pound (each/lb)</label>
          <input id="cpl" type="number" min="6" step="1" value="23">
          <div class="muted">Enter an average count per pound if you picked "Custom".</div>
        </div>
      </div>

      <div class="inline" style="margin-top:6px">
        <span class="muted">Quick presets:</span>
        <button class="preset" data-people="10" type="button">10</button>
        <button class="preset" data-people="25" type="button">25</button>
        <button class="preset" data-people="50" type="button">50</button>
        <button class="preset" data-people="100" type="button">100</button>
        <span class="muted">Presets set all as adults. Tweak Teens and Children if needed.</span>
        <div style="flex:1"></div>
        <button id="dmReset" type="button" class="btn">Reset</button>
      </div>
    </div>

    <!-- Micro-summary -->
    <div class="muted" id="outMicro" style="margin:6px 0 0 0">-</div>

    <!-- Results -->
    <div class="dm-card" role="region" aria-label="Results" aria-live="polite" aria-atomic="true">
      <h3>Results (estimate)</h3>
      <div class="result">
        <div class="muted" aria-hidden="true">Estimated shrimp to buy</div>
        <div class="big" id="outBig" aria-label="No estimate yet">-</div>
        <div class="fine" id="outFrom">-</div>
        <div class="fine" id="outExplain">Enter your guest mix to calculate.</div>
        <div class="fine" id="outRawLine">-</div>
        <div class="divider"></div>
        <div class="inline">
          <span class="pill" id="pillGuests">-</span>
          <span class="pill" id="pillSize">-</span>
          <span class="pill" id="pillPrice">pricing optional</span>
        </div>
      </div>
      <!-- Keep original result IDs present for compatibility -->
      <span id="outGuests" class="visually-hidden">-</span>
      <span id="outRaw" class="visually-hidden">-</span>
      <span id="outCount" class="visually-hidden">-</span>

      <div class="row-2" style="margin-top:10px">
        <div class="dm-card" style="margin:0">
          <h3>Cost estimate</h3>
          <div class="inline">
            <div><label>Subtotal</label><div id="outSubtotal" class="fine">$-</div></div>
            <div><label>Tax and fees</label><div id="outAdds" class="fine">$-</div></div>
            <div><label>Estimated total</label><div id="outTotal" class="fine">$-</div></div>
            <div><label>Per person</label><div id="outPPP" class="fine">$-</div></div>
          </div>
        </div>
        <div class="dm-card finder" role="region" aria-label="Find near me" style="margin:0">
          <div class="inline">
            <a class="btn" href="#" onclick="try{window.open('https://www.google.com/maps/search/shrimp+near+me','_blank');}catch(e){location.href='https://www.google.com/maps/search/shrimp+near+me';}return false;">Find shrimp near me</a>
            <a class="pill" href="#" onclick="try{window.open('https://www.google.com/maps/search/seafood+market','_blank');}catch(e){location.href='https://www.google.com/maps/search/seafood+market';}return false;">Seafood markets</a>
            <a class="pill" href="#" onclick="try{window.open('https://www.google.com/maps/search/grocery+store','_blank');}catch(e){location.href='https://www.google.com/maps/search/grocery+store';}return false;">Grocery stores</a>
          </div>
        </div>
      </div>
    </div>

    <!-- Pricing (optional) -->
    <div class="dm-card" role="region" aria-label="Pricing">
      <h3>Pricing (optional)</h3>
      <div class="row">
        <div><label for="priceLb">Unit price (US dollars per pound)</label><input id="priceLb" type="number" min="0" step="0.01" inputmode="decimal" placeholder="e.g., 8.99"></div>
        <div><label for="taxPct">Sales tax (percent)</label><input id="taxPct" type="number" min="0" step="0.1" inputmode="decimal" placeholder="e.g., 7.5"></div>
        <div><label for="fees">Extra fees (US dollars)</label><input id="fees" type="number" min="0" step="0.01" inputmode="decimal" placeholder="e.g., 8.00"></div>
      </div>
      <div class="muted">Cost = rounded raw pounds × unit price + tax + extra fees.</div>
    </div>

  </div>

  <!-- Logic from your shrimp.html, IDs/math intact; only UI/phrasing changed -->
  <script>
  (function(){
    const $ = id => document.getElementById(id);
    const N = (v,d=0)=>{const n=parseFloat(v);return isFinite(n)?n:d;};
    const money = n => (isFinite(n)&&n>=0) ? "$"+n.toFixed(2) : "$-";
    const fmt = (n,d=0)=> isFinite(n) ? n.toLocaleString(undefined,{minimumFractionDigits:d,maximumFractionDigits:d}) : "-";
    const roundQtr = lbs => Math.round(lbs*4)/4;

    function courseMult(c){ if(c==="main") return 1.00; if(c==="mixed") return 0.75; return 0.50; }
    function lenMult(v){ if(v==1.15) return 1.15; if(v==1.08) return 1.08; if(v==0.95) return 0.95; return 1.00; }

    function ediblePerAdultOz(course){
      if(course==="main")  return {adult:6.0, teen:4.8, child:3.6};
      if(course==="mixed") return {adult:4.5, teen:3.6, child:2.7};
      return                {adult:3.0, teen:2.4, child:1.8};
    }

    function yieldForForm(form){ return (form==="shell") ? 0.67 : 1.00; } // edible = raw * yield

    function getCountPerLb(){
      const preset = document.getElementById("sizePreset").value;
      if(preset==="custom"){
        return Math.max(6, N(document.getElementById("cpl").value,23));
      }
      return N(preset,23);
    }

    function compute(){
      const A=N($("A").value,0), T=N($("T").value,0), C=N($("C").value,0);
      const guests=A+T+C;
      const base=ediblePerAdultOz($("course").value);
      let edibleOz = (A*base.adult + T*base.teen + C*base.child)
                    * N($("appetite").value,1.0)
                    * lenMult(N($("length").value,1.0))
                    * N($("leftovers").value,1.0);
      const edibleLb = edibleOz/16;

      const y = yieldForForm($("form").value); // edible = raw * y
      const rawLb = (y>0) ? edibleLb / y : 0;
      const rawRounded = roundQtr(Math.max(0, rawLb));

      const cpl = getCountPerLb();
      const count = Math.round(rawRounded * cpl);

      const p=N($("priceLb").value,0), tax=N($("taxPct").value,0)/100, fees=N($("fees").value,0);
      const sub=rawRounded*p, adds=sub*tax + (fees>0?fees:0), tot=sub+adds, ppp=(guests>0 && tot>0)? tot/guests : NaN;

      return {guests, rawRounded, count, cpl, sub, adds, tot, ppp};
    }

    function sizeLabel(){
      const sel = document.getElementById("sizePreset");
      const v = sel.value;
      if(v==="custom"){
        const w = N(document.getElementById("cpl").value,23);
        return (w>0? (w + " per lb custom") : "custom");
      }
      const txt = sel.selectedOptions[0]?.text || "";
      if(txt.toLowerCase().includes("jumbo")) return "jumbo size";
      if(txt.toLowerCase().includes("large")) return "large size";
      if(txt.toLowerCase().includes("medium")) return "medium size";
      if(txt.toLowerCase().includes("small")) return "small size";
      return "chosen size";
    }

    function render(){
      // Select-all on focus for A/T/C
      ["A","T","C"].forEach(id=>{
        const el=$(id);
        if(el && !el._dmSel){ el._dmSel=true; el.addEventListener("focus",()=>{ try{ el.select(); }catch(e){} }); }
      });

      // Show/hide custom CPL
      const preset = document.getElementById("sizePreset").value;
      const wrap = document.getElementById("cplWrap");
      if(preset==="custom"){ wrap.style.display="block"; } else { wrap.style.display="none"; }

      const s=compute();

      // Big number (count) + ARIA
      const bigTxt = s.guests>0 ? (s.count.toLocaleString() + " shrimp") : "-";
      document.getElementById("outBig").textContent = bigTxt;
      document.getElementById("outBig").setAttribute("aria-label", s.guests>0 ? ("Estimated shrimp to buy: " + s.count.toLocaleString()) : "No estimate yet");

      // Secondary lines
      const rawTxt = s.guests>0 ? (fmt(s.rawRounded,(s.rawRounded%1)?2:0) + " lb") : "-";
      document.getElementById("outRawLine").textContent = s.guests>0 ? ("About " + rawTxt + " total (raw).") : "-";
      const appetiteTxt = document.getElementById("appetite").selectedOptions[0].text.toLowerCase();
      const lengthTxt = document.getElementById("length").selectedOptions[0].text.toLowerCase();
      const leftTxt = document.getElementById("leftovers").selectedOptions[0].text.toLowerCase();
      const courseTxt = document.getElementById("course").value==="main" ? "main dish" : (document.getElementById("course").value==="mixed" ? "mixed buffet" : "appetizer/snack");

      document.getElementById("outExplain").textContent = s.guests>0
        ? "Auto-calculated from course, appetite, event length, leftovers, shrimp form, and size."
        : "Enter your guest mix to calculate.";

      // "Estimated from..." line
      document.getElementById("outFrom").textContent = s.guests>0
        ? ("Estimated from " + s.guests + " guests - " + courseTxt + ", " + appetiteTxt + " appetite, " + lengthTxt + ", leftovers " + leftTxt + ", " + sizeLabel() + ".")
        : "-";

      // Micro-summary
      document.getElementById("outMicro").textContent = s.guests>0
        ? (s.guests + " guests • " + courseTxt + " • " + appetiteTxt + " appetite • " + lengthTxt + " • leftovers " + leftTxt + " • " + sizeLabel())
        : "-";

      // Keep original result IDs updated (compatibility)
      document.getElementById("outGuests").textContent = s.guests>0 ? String(s.guests) : "-";
      document.getElementById("outRaw").textContent    = s.guests>0 ? rawTxt : "-";
      document.getElementById("outCount").textContent  = s.guests>0 ? (s.count.toLocaleString() + (s.cpl? " @ " + s.cpl + "/lb":"")) : "-";

      // Cost outputs
      document.getElementById("outSubtotal").textContent = s.sub>0 ? money(s.sub) : "$-";
      document.getElementById("outAdds").textContent     = s.sub>0 ? money(s.adds) : "$-";
      document.getElementById("outTotal").textContent    = s.sub>0 ? money(s.tot) : "$-";
      document.getElementById("outPPP").textContent      = (s.tot>0 && s.guests>0) ? money(s.ppp) : "$-";

      // Pills
      document.getElementById("pillGuests").textContent = s.guests>0 ? (s.guests + " guests total") : "-";
      document.getElementById("pillSize").textContent   = s.guests>0 ? sizeLabel() : "-";
      document.getElementById("pillPrice").textContent  = (s.tot>0 && s.guests>0) ? ("about " + money(s.ppp) + " per person") : "pricing optional";
    }

    ["A","T","C","course","length","leftovers","appetite","form","sizePreset","cpl","priceLb","taxPct","fees"].forEach(id=>{
      const el=$(id); if(el){el.addEventListener("input",render); el.addEventListener("change",render);}
    });

    // Presets
    document.querySelectorAll(".preset[data-people]").forEach(btn=>{
      btn.addEventListener("click",()=>{
        const n=parseInt(btn.getAttribute("data-people"),10)||0;
        document.getElementById("A").value=n; document.getElementById("T").value=0; document.getElementById("C").value=0;
        const a=document.getElementById("A"); try{ a.focus({preventScroll:true}); a.select(); }catch(e){}
        render();
      });
    });

    // Reset
    (function attachReset(){
      const btn = document.getElementById("dmReset");
      if(!btn) return;
      btn.addEventListener("click", ()=>{
        document.querySelectorAll("input, select").forEach(el=>{
          if(el.tagName==="SELECT"){
            const i=Array.from(el.options).findIndex(o=>o.defaultSelected);
            el.selectedIndex = i>=0 ? i : 0;
          } else { el.value = el.defaultValue; }
        });
        document.querySelectorAll("input, select").forEach(el=>{
          el.dispatchEvent(new Event("input",{bubbles:true}));
          el.dispatchEvent(new Event("change",{bubbles:true}));
        });
        const a=document.getElementById("A"); try{ a.focus({preventScroll:true}); a.select(); }catch(e){}
        render();
      });
    })();

    // Start
    const start = () => { const a=document.getElementById("A"); try{ a.focus({preventScroll:true}); a.select(); }catch(e){} render(); };
    if (document.readyState === "loading") document.addEventListener("DOMContentLoaded", start, {once:true});
    else start();
  })();
  </script>

  <div class="muted" style="text-align:center;margin:16px 0 0 0;">
    This tool provides general portion and cost estimates for planning only. Results depend on the information you enter and typical averages. DinnerMath is not responsible for decisions, purchases, or outcomes based on these estimates.<br>
    © 2025 DinnerMath. All rights reserved. Use for planning only.
  </div>
</body>
</html>
