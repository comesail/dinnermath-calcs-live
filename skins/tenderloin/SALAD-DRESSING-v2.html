<!doctype html>
<!-- © 2025 DinnerMath — Calculator code and design are proprietary. Licensed for end-user viewing only via comesail.github.io. -->
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>DinnerMath — Salad Dressing Quantity Calculator (Tenderloin ultratight)</title>
  <meta name="description" content="Estimate how much salad dressing to buy or batch (planning estimate).">
  <style>
    :root{ --ink:#111827; --muted:#6b7280; --line:#e5e7eb; --bg:#ffffff; }
    *{box-sizing:border-box}
    html,body{margin:0;padding:0}
    body{background:var(--bg);color:var(--ink);font-family:Inter, ui-sans-serif, system-ui, -apple-system, 'Segoe UI', Roboto, Helvetica, Arial}
    a{color:var(--ink);text-decoration:underline}
    .wrap{max-width:740px;margin:0 auto;padding:clamp(8px,1.6vw,14px)}
    .card{background:#fff;border:1px solid var(--line);border-radius:0;padding:10px;margin:8px 0;box-shadow:0 1px 0 rgba(17,24,39,.06),0 1px 2px rgba(17,24,39,.05)}
    h1{font-size:20px;margin:0 0 6px;text-align:center;font-weight:800}
    h3{font-size:15px;margin:0 0 6px;text-align:center;font-weight:800}
    .lede{color:var(--muted);margin:0 0 8px;text-align:center;font-size:12.5px}
    label{font-size:10.5px;color:#374151;display:block;margin:0 0 2px;font-weight:600}
    input[type=number], select{width:100%;border:1px solid #d1d5db;border-radius:7px;padding:6px 8px;font-size:12.5px;line-height:1.2;background:#fff;color:var(--ink);height:34px}
    .row{display:grid;grid-template-columns:1fr 1fr;gap:6px}
    .guest-grid{display:grid;grid-template-columns:110px 110px 110px 1fr;gap:6px;align-items:end}
    .inline{display:flex;align-items:center;gap:6px;flex-wrap:wrap}
    .muted{color:var(--muted);font-size:11px}
    .fine{font-size:12.5px;color:#374151;line-height:1.35}
    .btn{display:inline-block;border:1.5px solid #111827;border-radius:999px;padding:6px 10px;font-size:12.5px;font-weight:700;color:#111827;background:#fff;cursor:pointer}
    .pill{font-size:10px;border:1px solid #d1d5db;border-radius:999px;padding:2px 6px;color:#475569;background:#fff;text-decoration:none}
    .presets .btn{border-width:2px}
    .result{border:2px solid #111827;padding:10px;background:#fff}
    .big{font-size:24px;font-weight:900;line-height:1.2;margin:6px 0}
    .grid2{display:grid;grid-template-columns:1fr 1fr;gap:8px}
    .finder{padding:8px;border:2px solid #111827}
    .divider{height:1px;background:var(--line);margin:8px 0}
    .visually-hidden{position:absolute!important;clip:rect(1px,1px,1px,1px);clip-path:inset(50%);height:1px;width:1px;overflow:hidden;white-space:nowrap;border:0;padding:0;margin:-1px}
    @media (max-width:820px){ .row,.guest-grid,.grid2{grid-template-columns:1fr} }
  </style>
</head>
<body>
  <div class="wrap">

    <!-- Header -->
    <div class="card" role="region" aria-label="Header">
      <h1>Salad Dressing — Quantity Calculator</h1>
      <p class="lede">Enter guests and settings (or tap a quick preset). We will estimate how much dressing to buy or batch (planning estimate).</p>
    </div>

    <!-- Inputs -->
    <div class="card" role="region" aria-label="Inputs">
      <h3>Inputs</h3>
      <div class="guest-grid" aria-label="Guests">
        <div><label for="A">Adults</label><input id="A" type="number" min="0" step="1" value="10" autofocus></div>
        <div><label for="T">Teens</label><input id="T" type="number" min="0" step="1" value="0"></div>
        <div><label for="C">Children</label><input id="C" type="number" min="0" step="1" value="0"></div>
        <div>
          <label for="course">Course mode</label>
          <select id="course">
            <option value="side" selected>Side salad</option>
            <option value="entree">Entree salad</option>
            <option value="dip">Dip station</option>
            <option value="tasting">Tasting flight</option>
          </select>
        </div>
      </div>

      <div class="row" aria-label="Context" style="margin-top:6px">
        <div>
          <label for="length">Event length</label>
          <select id="length">
            <option value="0.95">Short — about 1 to 2 hours</option>
            <option value="1.00" selected>Standard — about 2 to 3 hours</option>
            <option value="1.08">Long — about 3 to 4 hours</option>
            <option value="1.15">Extended — about 4 to 5 hours</option>
          </select>
        </div>
        <div>
          <label for="leftovers">Add leftovers</label>
          <select id="leftovers">
            <option value="1.00" selected>No</option>
            <option value="1.10">+10%</option>
            <option value="1.20">+20%</option>
          </select>
        </div>
        <div>
          <label for="appetite">Appetite</label>
          <select id="appetite">
            <option value="0.90">Light</option>
            <option value="1.00" selected>Typical</option>
            <option value="1.20">Hearty</option>
          </select>
        </div>
        <div>
          <label for="prep">Preparation</label>
          <select id="prep">
            <option value="homemade" selected>Homemade</option>
            <option value="bottled">Bottled</option>
          </select>
          <div class="muted">Pick Bottled to choose common bottle sizes below.</div>
        </div>
      </div>

      <div class="row" aria-label="Item specifics">
        <div>
          <label for="style">Dressing style</label>
          <select id="style">
            <option value="0.90">Vinaigrette or thin</option>
            <option value="1.00" selected>Creamy</option>
            <option value="1.20">Thick or chunky</option>
          </select>
          <div class="muted">We nudge portion size based on style.</div>
        </div>
        <div id="bottleWrap">
          <label for="bottle">Bottle size class</label>
          <select id="bottle">
            <option value="8">Small bottle — about 8 oz</option>
            <option value="12" selected>Average bottle — about 12 oz</option>
            <option value="16">Large bottle — about 16 oz</option>
            <option value="32">Jumbo bottle — about 32 oz</option>
          </select>
          <div class="muted">We convert total ounces into about how many bottles.</div>
        </div>
      </div>

      <!-- Presets + Reset -->
      <div class="inline presets" style="margin-top:6px">
        <span class="muted">Quick presets:</span>
        <button class="btn preset" data-people="10" type="button">10</button>
        <button class="btn preset" data-people="25" type="button">25</button>
        <button class="btn preset" data-people="50" type="button">50</button>
        <button class="btn preset" data-people="100" type="button">100</button>
        <span class="muted">Presets set all as Adults — tweak Teens or Children if needed.</span>
        <div style="flex:1"></div>
        <button id="dmReset" type="button" class="btn">Reset</button>
      </div>
    </div>

    <!-- Micro-summary -->
    <div class="muted" id="micro">-</div>

    <!-- Results -->
    <div class="card" role="region" aria-label="Results" aria-live="polite" aria-atomic="true">
      <h3>Results (estimate)</h3>
      <div class="result">
        <div class="muted" aria-hidden="true">Estimated dressing to make or buy</div>
        <div id="outBig" class="big" aria-label="Estimated amount: 0">-</div>
        <div class="fine" id="outFrom">-</div>
        <div class="fine" id="outFromTL">-</div>
        <div class="fine muted" id="outBatchNote"></div>
        <div class="divider"></div>
        <div class="inline">
          <span class="pill" id="pillGuests">-</span>
          <span class="pill" id="pillPrep">-</span>
          <span class="pill" id="pillStyle">-</span>
          <span class="pill" id="pillPrice">pricing optional</span>
        </div>
      </div>

      <div class="grid2" style="margin-top:10px">
        <div class="card" style="margin:0">
          <h3>Cost estimate</h3>
          <div class="inline">
            <div><label>Subtotal</label><div id="outSubtotal" class="fine">$—</div></div>
            <div><label>Tax and fees</label><div id="outAdds" class="fine">$—</div></div>
            <div><label>Estimated total</label><div id="outTotal" class="fine">$—</div></div>
            <div><label>Per person</label><div id="outPPP" class="fine">$—</div></div>
          </div>
        </div>
        <div class="card finder" role="region" aria-label="Find near me" style="margin:0">
          <div class="inline">
            <a class="btn" href="#" onclick="try{window.open('https://www.google.com/maps/search/salad+dressing+near+me','_blank');}catch(e){location.href='https://www.google.com/maps/search/salad+dressing+near+me';}return false;">Find salad dressing near me</a>
            <a class="pill" href="#" onclick="try{window.open('https://www.google.com/maps/search/grocery+store','_blank');}catch(e){location.href='https://www.google.com/maps/search/grocery+store';}return false;">Grocery stores</a>
            <a class="pill" href="#" onclick="try{window.open('https://www.google.com/maps/search/deli','_blank');}catch(e){location.href='https://www.google.com/maps/search/deli';}return false;">Deli</a>
          </div>
        </div>
      </div>
    </div>

    <!-- Pricing (optional) -->
    <div class="card" role="region" aria-label="Pricing">
      <h3>Pricing (optional)</h3>
      <div class="row">
        <div>
          <label for="priceMode">Pricing mode</label>
          <select id="priceMode">
            <option value="bottle" selected>Per bottle</option>
            <option value="ounce">Per ounce</option>
          </select>
        </div>
        <div>
          <label for="priceUnit">Unit price</label>
          <input id="priceUnit" type="number" min="0" step="0.01" placeholder="e.g., 3.99">
          <div class="muted">If Per bottle: dollars per bottle (uses your bottle size). If Per ounce: dollars per ounce.</div>
        </div>
        <div><label for="taxPct">Sales tax (percent)</label><input id="taxPct" type="number" min="0" step="0.1" placeholder="e.g., 7.5"></div>
        <div><label for="fees">Extra fees (US dollars)</label><input id="fees" type="number" min="0" step="0.01" placeholder="e.g., 6.00"></div>
      </div>
      <div class="muted">Cost = unit price applied to the rounded quantity for your mode + tax + extra fees.</div>
    </div>

  </div>

  <script>
  // math/logic adapted from original salad-dressing calculator (IDs preserved)
  (function(){
    const $=id=>document.getElementById(id);
    const N=(v,d=0)=>{const n=parseFloat(v);return isFinite(n)?n:d;};
    const money=n=>(isFinite(n)&&n>=0)?"$"+n.toFixed(2):"$—";
    const fmt=(n,d=0)=> isFinite(n) ? n.toLocaleString(undefined,{minimumFractionDigits:d,maximumFractionDigits:d}) : "—";

    const courseMult=c=>(c==="side"?1.00:c==="entree"?1.60:c==="dip"?1.30:0.70);
    const lenMult=v=>(v==1.15?1.15:v==1.08?1.08:v==0.95?0.95:1.00);

    function toggleBottle(){
      const prep=($("prep")||{}).value||"homemade";
      $("bottleWrap").style.display = prep==="bottled" ? "block" : "none";
    }

    function compute(){
      const A=N($("A").value,0), T=N($("T").value,0), C=N($("C").value,0);
      const guests=A+T+C;
      const appetite=N($("appetite").value,1.0);
      const leftovers=N($("leftovers").value,1.0);
      const length=N($("length").value,1.0);
      const course=$("course").value;
      const style=N($("style").value,1.0);
      const prep=($("prep")||{}).value||"homemade";

      // base ounces per person (from source)
      const base={adult:1.5, teen:1.75, child:1.0};
      let ounces=(A*base.adult + T*base.teen + C*base.child);
      ounces*= courseMult(course) * appetite * lenMult(length) * leftovers * style;

      const ozRounded = Math.ceil(Math.max(0, ounces));
      const cups = ozRounded / 8.0;
      const quarts = ozRounded / 32.0;

      // bottles if bottled
      let bottles = 0;
      const ozPerBottle = N(($("bottle").value||"12"),12);
      if(prep==="bottled" && ozRounded>0){ bottles = Math.ceil(ozRounded / ozPerBottle); }

      // pricing
      const mode=(document.getElementById("priceMode")||{}).value||"bottle";
      const price=N($("priceUnit").value,0), tax=N($("taxPct").value,0)/100, fees=N($("fees").value,0);
      let subtotal=0;
      if(price>0){
        if(mode==="bottle" && bottles>0){ subtotal = bottles*price; }
        else if(mode==="ounce" && ozRounded>0){ subtotal = ozRounded*price; }
      }
      const adds = subtotal*tax + (fees>0?fees:0);
      const total = subtotal + adds;
      const ppp = (guests>0 && total>0) ? total/guests : NaN;

      return {guests, ozRounded, cups, quarts, bottles, subtotal, adds, total, ppp, prep, course, style};
    }

    function microSummary(s){
      const courseTxt = ($("course").selectedOptions[0]||{}).text.toLowerCase();
      const lengthTxt = ($("length").selectedOptions[0]||{}).text.toLowerCase();
      const leftoversTxt = ($("leftovers").selectedOptions[0]||{}).text.toLowerCase();
      const appetiteTxt = ($("appetite").selectedOptions[0]||{}).text.toLowerCase();
      const prepTxt = ($("prep").selectedOptions[0]||{}).text.toLowerCase();
      const styleTxt = ($("style").selectedOptions[0]||{}).text.toLowerCase();
      return (s.guests||0)+" guests • "+courseTxt+" • "+appetiteTxt+" appetite • "+lengthTxt+" • leftovers "+leftoversTxt+" • "+prepTxt+" • "+styleTxt;
    }
    // Bottle-based warnings for salad dressing
    function updateBatchNoteBottle(s){
      const noteEl = document.getElementById("outBatchNote");
      if (!noteEl) return;
      noteEl.textContent = "";

      const bottleSel = (document.getElementById("bottle")||{});
      const ozPerBottle = parseFloat(bottleSel.value || "0");
      const bottleText  = bottleSel.selectedOptions?.[0]?.text || "";

      const needOz = s.ozRounded || 0;
      const bottles = s.bottles || 0;
      const totalOz = (isFinite(ozPerBottle) && bottles>0) ? ozPerBottle * bottles : 0;

      // Minimum purchase: one bottle much larger than need
      if (bottles === 1 && isFinite(ozPerBottle) && (ozPerBottle >= needOz*1.2 || (ozPerBottle - needOz) >= 8)) {
        const name = (bottleText.split(" — ")[0] || "bottle").toLowerCase();
        noteEl.textContent =
          "Minimum batch size: one " + name + " (about " +
          Math.round(ozPerBottle) + " oz) is larger than you need — leftovers expected.";
        return;
      }

      // Multi-bottle heads up: materially above need
      if (bottles >= 2 && isFinite(totalOz) && (totalOz >= needOz*1.25 || (totalOz - needOz) >= 12)) {
        noteEl.textContent =
          "Heads up: " + bottles + " bottles (about " + Math.round(totalOz) +
          " oz) is above what you need (" + Math.round(needOz) +
          " oz). Consider a smaller bottle size or mixing sizes.";
      }
    }
    

    function render(){
      toggleBottle();
      const s=compute();

      // Big number: prioritize bottles when bottled, otherwise ounces
      if(s.guests>0){
        const primary = (s.prep==="bottled" && s.bottles>0)
          ? ("About " + s.bottles + " bottles")
          : ("About " + fmt(s.ozRounded,0) + " oz");
        $("outBig").textContent = primary;
        $("outBig").setAttribute("aria-label","Estimated amount: " + primary.replace("About ",""));

        $("outFrom").textContent =
          "Estimated from " + s.guests + " guests — " +
          ($("course").selectedOptions[0]||{}).text.toLowerCase() + ", " +
          ($("appetite").selectedOptions[0]||{}).text.toLowerCase() + " appetite, " +
          ($("length").selectedOptions[0]||{}).text.toLowerCase() + ", leftovers " +
          ($("leftovers").selectedOptions[0]||{}).text.toLowerCase() + ", " +
          ($("prep").selectedOptions[0]||{}).text.toLowerCase() + " • " +
          ($("style").selectedOptions[0]||{}).text.toLowerCase() + ".";

        const secondary = (s.prep==="bottled")
          ? ("About " + fmt(s.ozRounded,0) + " oz • about " + (Math.round(s.cups*10)/10) + " cups • about " + (Math.round(s.quarts*100)/100) + " quarts.")
          : ("About " + (Math.round(s.cups*10)/10) + " cups • about " + (Math.round(s.quarts*100)/100) + " quarts.");
        $("outFromTL").textContent = secondary;

        $("pillGuests").textContent = s.guests + " guests total";
        $("pillPrep").textContent = ($("prep").selectedOptions[0]||{}).text.toLowerCase();
        $("pillStyle").textContent = ($("style").selectedOptions[0]||{}).text.toLowerCase();
      } else {
        ["outBig","outFrom","outFromTL","pillGuests","pillPrep","pillStyle"].forEach(id=>{ const el=$(id); if(el) el.textContent="-"; });
        $("outBig").setAttribute("aria-label","Estimated amount: 0");
      }

      // Pricing (reuse original math)
      $("outSubtotal").textContent = s.subtotal>0 ? money(s.subtotal) : "$—";
      $("outAdds").textContent     = s.subtotal>0 ? money(s.adds) : "$—";
      $("outTotal").textContent    = s.subtotal>0 ? money(s.total) : "$—";
      $("outPPP").textContent      = (s.total>0 && s.guests>0) ? money(s.ppp) : "$—";

      $("micro").textContent = microSummary(s);
      $("outBatchNote").textContent = ""; // no special unit warnings for dressing
      updateBatchNoteBottle(s);

}

    // Listeners
    ["A","T","C","course","length","leftovers","appetite","prep","style","bottle","priceMode","priceUnit","taxPct","fees"].forEach(id=>{
      const el=document.getElementById(id); if(el){ el.addEventListener("input",render); el.addEventListener("change",render); }
    });

    // Presets
    document.querySelectorAll("button.preset").forEach(btn=>{
      btn.addEventListener("click", function(){
        const n = parseInt(btn.getAttribute("data-people")||"0",10);
        const A=$("A"),T=$("T"),C=$("C");
        if(A){A.value=n;}
        if(T){T.value=0;}
        if(C){C.value=0;}
        render();
      });
    });

    // Reset
    (function attachReset(){
      const btn=document.getElementById("dmReset"); if(!btn) return;
      btn.addEventListener("click", ()=>{
        document.querySelectorAll("input, select").forEach(el=>{
          if(el.tagName==="SELECT"){
            const i=Array.from(el.options).findIndex(o=>o.defaultSelected);
            el.selectedIndex = i>=0 ? i : 0;
          } else { el.value = el.defaultValue; }
        });
        document.querySelectorAll("input, select").forEach(el=>{
          el.dispatchEvent(new Event("input",{bubbles:true}));
          el.dispatchEvent(new Event("change",{bubbles:true}));
        });
        render();
      });
    })();

    // Select-all on focus for A/T/C
    ["A","T","C"].forEach(id=>{
      const el=$(id); if(!el) return;
      function sel(){ try{ el.select(); }catch(e){} }
      el.addEventListener("focus", ()=> setTimeout(sel,0));
      el.addEventListener("click", sel);
      el.addEventListener("mouseup", e=> e.preventDefault());
      el.addEventListener("touchend", sel);
    });

    render();
  })();
  </script>

  <!-- Legal footer -->
  <div class="muted" style="text-align:center;margin:16px 0 0 0;">
    This tool provides general portion and cost estimates for planning only. Results depend on the information you enter and typical averages.
    DinnerMath is not responsible for decisions, purchases, or outcomes based on these estimates.<br>
    © 2025 DinnerMath. All rights reserved. Use for planning only.
  </div>
</body>
</html>
