<!doctype html>
<!-- © 2025 DinnerMath — Calculator code and design are proprietary.
     Licensed for end-user viewing only via comesail.github.io. -->
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>DinnerMath — Blue Crabs Quantity Calculator (Tenderloin ultratight)</title>
<meta name="description" content="How many blue crabs per person? Estimate whole crabs to buy and approximate live pounds, with optional pricing and quick presets.">
<style>
  :root{ --ink:#111827; --muted:#6b7280; --line:#e5e7eb; --bg:#ffffff; --card:#ffffff; }
  *{box-sizing:border-box}
  html,body{margin:0;padding:0}
  body{background:var(--bg);color:var(--ink);font-family:"Inter",ui-sans-serif,system-ui,-apple-system,"Segoe UI",Roboto,Helvetica,Arial}
  .wrap{max-width:740px;margin:0 auto;padding:clamp(8px,1.6vw,14px)}
  .dm-card{background:var(--card);border:1px solid var(--line);border-radius:0px;padding:10px;margin:8px 0;box-shadow:0 1px 0 rgba(17,24,39,.06),0 1px 2px rgba(17,24,39,.05)}
  h1{font-size:20px;margin:0 0 6px;text-align:center;font-weight:800}
  h2{font-size:16px;margin:10px 0 6px;text-align:center;font-weight:800}
  h3{font-size:15px;margin:0 0 6px;text-align:center;font-weight:800}
  .lede{color:var(--muted);margin:0 0 8px;text-align:center;font-weight:400;font-size:12.5px}
  .row{display:grid;grid-template-columns:1fr 1fr;gap:6px}
  @media (max-width:820px){.row{grid-template-columns:1fr}}
  label{font-size:10.5px;color:#374151;display:block;margin:0 0 2px;font-weight:600;text-align:left}
  input[type="number"],select{width:100%;border:1px solid #d1d5db;border-radius:7px;padding:6px 8px;font-size:12.5px;line-height:1.2;background:#fff;color:var(--ink)}
  .muted{color:var(--muted);font-size:11px}
  .fine{font-size:12.5px;color:#374151;line-height:1.35}
  .inline{display:flex;align-items:center;gap:6px;flex-wrap:wrap}
  .divider{height:1px;background:var(--line);margin:8px 0}
  .btn{display:inline-block;border:1.5px solid var(--ink);border-radius:999px;padding:6px 10px;font-size:12.5px;font-weight:700;text-decoration:none;color:var(--ink);cursor:pointer;background:#fff}
  .btn:hover{background:#f3f4f6}
  .btn:focus-visible, .preset:focus-visible{outline:3px solid #94a3b8;outline-offset:2px}
  .pill{font-size:10px;border:1px solid #d1d5db;border-radius:999px;padding:2px 6px;color:#475569;background:#fff;text-decoration:none}
  .preset{border:2px solid var(--ink);background:#f8fafc;border-radius:999px;padding:5px 10px;font-size:13px;font-weight:800;cursor:pointer}
  .preset:hover{background:#eef2f7}
  .result{border:2px solid var(--ink);border-radius:0px;padding:10px;margin-top:6px;background:#fff}
  .result .big{font-size:24px;font-weight:800;line-height:1.2;color:var(--ink);font-variant-numeric:tabular-nums}
  .finder{padding:8px;border-radius:0px;border:2px solid var(--ink);background:#fff}
  .visually-hidden{position:absolute!important;clip:rect(1px,1px,1px,1px);clip-path:inset(50%);height:1px;width:1px;overflow:hidden;white-space:nowrap;border:0;padding:0;margin:-1px}
  [aria-label="Guests"]{display:flex;flex-wrap:wrap;gap:6px;align-items:flex-end}
  [aria-label="Guests"]>div{flex:0 0 auto}
  #A,#T,#C{width:110px}
  [aria-label="Guests"]>div:nth-child(4){flex:1 1 240px;min-width:220px}
  .row-2{display:grid;grid-template-columns:1fr 1fr;gap:10px}
  @media (max-width:820px){ .row-2{grid-template-columns:1fr} }
  a, a:visited{color:var(--ink)}
</style>
</head>
<body class="ultra">
  <div class="wrap" id="blue-crabs">

    <!-- Header -->
    <div class="dm-card" role="region" aria-label="Header">
      <h1>Blue Crabs Quantity Calculator — Crabs per Person</h1>
      <p class="lede">
        Enter guests and settings (or tap a quick preset). We will estimate how many <strong>crabs</strong> to buy (planning estimate).
      </p>
    </div>

    <!-- Inputs -->
    <div class="dm-card" role="region" aria-label="Inputs">
      <h3>Inputs</h3>
      <div class="row" aria-label="Guests">
        <div><label for="A">Adults</label><input id="A" type="number" min="0" step="1" inputmode="numeric" value="10" autofocus></div>
        <div><label for="T">Teens</label><input id="T" type="number" min="0" step="1" inputmode="numeric" value="0"></div>
        <div><label for="C">Children</label><input id="C" type="number" min="0" step="1" inputmode="numeric" value="0"></div>
        <div>
          <label for="course">Serving style</label>
          <select id="course">
            <option value="main" selected>Main (crab feast)</option>
            <option value="mixed">Mixed buffet</option>
            <option value="app">Appetizer/snack</option>
          </select>
        </div>
      </div>

      <div class="row" aria-label="Context">
        <div>
          <label for="size">Crab size (optional)</label>
          <select id="size">
<option value="">I don't know yet</option>
            <option value="0.25">Small (about 0.25 lb live each)</option>
            <option value="0.33" selected>Medium (about 0.33 lb live each)</option>
            <option value="0.50">Large (about 0.50 lb live each)</option>
          </select>
          <div class="muted">Used to estimate total live pounds from the crab count.</div>
        </div>
        <div>
          <label for="appetite">Appetite</label>
          <select id="appetite">
            <option value="0.90">Light</option>
            <option value="1.00" selected>Typical</option>
            <option value="1.20">Hearty</option>
          </select>
        </div>
        <div>
          <label for="length">Event length</label>
          <select id="length">
            <option value="0.95">Short - about 1 to 2 hours</option>
            <option value="1.00" selected>Standard - about 2 to 3 hours</option>
            <option value="1.08">Long - about 3 to 4 hours</option>
            <option value="1.15">Extended - about 4 to 5 hours</option>
          </select>
        </div>
        <div>
          <label for="leftovers">Add leftovers</label>
          <select id="leftovers">
            <option value="1.00" selected>No</option>
            <option value="1.10">+10%</option>
            <option value="1.20">+20%</option>
          </select>
        </div>
      </div>

      <div class="inline" style="margin-top:6px">
        <span class="muted">Quick presets:</span>
        <button class="preset" data-people="10" type="button">10</button>
        <button class="preset" data-people="25" type="button">25</button>
        <button class="preset" data-people="50" type="button">50</button>
        <button class="preset" data-people="100" type="button">100</button>
        <span class="muted">Presets set all as adults. Tweak Teens and Children if needed.</span>
        <div style="flex:1"></div>
        <button id="dmReset" type="button" class="btn">Reset</button>
      </div>
    </div>

    <!-- Micro summary -->
    <div class="muted" id="outMicro" style="margin:6px 0 0 0">-</div>

    <!-- Results (estimate) -->
    <div class="dm-card" role="region" aria-label="Results" aria-live="polite" aria-atomic="true">
      <h3>Results (estimate)</h3>
      <div class="result">
        <div class="muted" aria-hidden="true">Estimated crabs to buy</div>
        <div class="big" id="outCrabs" aria-label="No estimate yet">-</div>
        <div class="fine" id="outFrom">-</div>
        <div class="fine" id="outExplain">Enter your guest mix to calculate.</div>
        <div class="divider"></div>
        <div class="inline">
          <span class="pill" id="pillGuests">-</span>
          <span class="pill" id="pillSize">-</span>
          <span class="pill" id="pillPrice">pricing optional</span>
        </div>
      </div>
      <span id="outGuests" class="visually-hidden">-</span>

      <!-- Cost + Finder two-up inside Results -->
      <div class="row-2" style="margin-top:10px">
        <div class="dm-card" style="margin:0">
          <h3>Cost estimate</h3>
          <div class="inline">
            <div><label>Subtotal</label><div id="outSubtotal" class="fine">$-</div></div>
            <div><label>Tax and fees</label><div id="outAdds" class="fine">$-</div></div>
            <div><label>Estimated total</label><div id="outTotal" class="fine">$-</div></div>
            <div><label>Per person</label><div id="outPPP" class="fine">$-</div></div>
          </div>
        </div>
        <div class="dm-card finder" role="region" aria-label="Find near me" style="margin:0">
          <div class="inline">
            <a class="btn" href="#" onclick="try{window.open('https://www.google.com/maps/search/blue+crabs+near+me','_blank');}catch(e){location.href='https://www.google.com/maps/search/blue+crabs+near+me';}return false;">Find blue crabs near me</a>
            <a class="pill" href="#" onclick="try{window.open('https://www.google.com/maps/search/seafood+market','_blank');}catch(e){location.href='https://www.google.com/maps/search/seafood+market';}return false;">Seafood markets</a>
            <a class="pill" href="#" onclick="try{window.open('https://www.google.com/maps/search/grocery+store','_blank');}catch(e){location.href='https://www.google.com/maps/search/grocery+store';}return false;">Grocery stores</a>
          </div>
        </div>
      </div>
    </div>

    <!-- Pricing (optional) BELOW Results -->
    <div class="dm-card" role="region" aria-label="Pricing">
      <h3>Pricing (optional)</h3>
      <div class="row">
        <div><label for="priceDozen">Price per dozen (US dollars)</label><input id="priceDozen" type="number" min="0" step="0.01" inputmode="decimal" placeholder="e.g., 42.00"></div>
        <div><label for="priceEach">Or price per crab (US dollars)</label><input id="priceEach" type="number" min="0" step="0.01" inputmode="decimal" placeholder="optional"></div>
        <div><label for="taxPct">Sales tax (percent)</label><input id="taxPct" type="number" min="0" step="0.1" inputmode="decimal" placeholder="e.g., 7.5"></div>
        <div><label for="fees">Extra fees (US dollars)</label><input id="fees" type="number" min="0" step="0.01" inputmode="decimal" placeholder="e.g., 8.00"></div>
      </div>
      <div class="muted">If both prices are entered, we use price per dozen. Cost = crabs × unit price, then add tax and fees.</div>
    </div>

  </div>

  <!-- Calculator logic -->
  
<script>
(function(){
  const $ = id => document.getElementById(id);
  const N = (v,d=0)=>{const n=parseFloat(v);return isFinite(n)?n:d;};
  const money = n => (isFinite(n)&&n>=0) ? "$"+n.toFixed(2) : "$-";

  function compute(){
    const A=N($("A").value,0), T=N($("T").value,0), C=N($("C").value,0);
    const guests = A+T+C;

    const course = $("course")?$("course").value:"main";
    const appetite = N($("appetite")?$("appetite").value:1.0,1.0);
    const length   = N($("length")?$("length").value:1.0,1.0);
    const leftovers= N($("leftovers")?$("leftovers").value:1.0,1.0);

    // Rough per-person crabs baseline by course
    function crabsPerPerson(c){
      if(c==="main")  return {adult:6,  teen:5,  child:3.5};
      if(c==="mixed") return {adult:4.5,teen:3.6,child:2.6};
      return               {adult:2.5,teen:2.0,child:1.5};
    }
    const base = crabsPerPerson(course);
    let crabs = (A*base.adult + T*base.teen + C*base.child);
    const lenMult = v => (v==1.15?1.15:v==1.08?1.08:v==0.95?0.95:1.00);
    crabs *= appetite * lenMult(length) * leftovers;
    const crabsRounded = Math.max(0, Math.ceil(crabs));

    // Optional size => live pounds
    const sizeSel = $("size");
    const lbPerCrab = sizeSel && sizeSel.value ? N(sizeSel.value,0) : 0;
    const livePounds = (lbPerCrab>0 && crabsRounded>0) ? (crabsRounded*lbPerCrab) : 0;

    // Pricing
    const priceDozen = N($("priceDozen")?$("priceDozen").value:0,0);
    const priceEach  = N($("priceEach")?$("priceEach").value:0,0);
    const tax = N($("taxPct")?$("taxPct").value:0,0)/100;
    const fees= N($("fees")?$("fees").value:0,0);

    let unitEach = 0;
    if (lbPerCrab>0 && priceDozen>0) unitEach = priceDozen/12;
    else if (priceEach>0) unitEach = priceEach;

    const subtotal = (unitEach>0 && crabsRounded>0) ? (unitEach * crabsRounded) : 0;
    const adds = subtotal*tax + (fees>0?fees:0);
    const total = subtotal + adds;
    const ppp = (guests>0 && total>0) ? total/guests : NaN;

    return {guests, course, appetite, length, leftovers, crabsRounded, lbPerCrab, livePounds, priceDozen, priceEach, subtotal, adds, total, ppp, unitEach};
  }

  function render(){
    // select-all on focus
    ["A","T","C"].forEach(id=>{const el=$(id); if(el && !el._dmSel){el._dmSel=true; el.addEventListener("focus",()=>{try{el.select();}catch(e){}});}});

    const s = compute();

    // Micro-summary and a11y text (safe var names)
    const m_course = $("course") ? $("course").selectedOptions[0].text.toLowerCase() : "main dish";
    const m_appetite = $("appetite") ? $("appetite").selectedOptions[0].text.toLowerCase() : "typical";
    const m_length = $("length") ? $("length").selectedOptions[0].text.toLowerCase() : "standard - about 2 to 3 hours";
    const m_leftovers = $("leftovers") ? $("leftovers").selectedOptions[0].text.toLowerCase() : "no";
    const m_size = $("size") ? $("size").selectedOptions[0].text.toLowerCase() : "size not set";
    if ($("outMicro")) {
      $("outMicro").textContent = s.guests>0
        ? (s.guests + " guests • " + m_course + " • " + m_appetite + " appetite • " + m_length + " • leftovers " + m_leftovers + " • " + m_size)
        : "-";
    }
    if ($("outGuests")) {
      $("outGuests").textContent = s.guests>0 ? (s.guests + " total guests") : "-";
    }



    // Big number
    const bigTxt = s.guests>0 ? (s.crabsRounded.toLocaleString() + " crabs") : "-";
    $("outCrabs").textContent = bigTxt;
    $("outCrabs").setAttribute("aria-label", s.guests>0 ? ("Estimated crabs to buy: " + s.crabsRounded.toLocaleString()) : "No estimate yet");

    // Helper lines
    $("outFrom").textContent = (s.guests>0)
      ? (function(){
          const courseTxt = $("course") ? $("course").selectedOptions[0].text.toLowerCase() : "main dish";
          const appetiteTxt = $("appetite") ? $("appetite").selectedOptions[0].text.toLowerCase() : "typical";
          const lengthTxt = $("length") ? $("length").selectedOptions[0].text.toLowerCase() : "standard - about 2 to 3 hours";
          const leftTxt = $("leftovers") ? $("leftovers").selectedOptions[0].text.toLowerCase() : "no";
          const sizeOpt = $("size") ? $("size").selectedOptions[0].text.toLowerCase() : "";
          const parts = [
            "Estimated from " + s.guests + " guests",
            courseTxt,
            (appetiteTxt ? (appetiteTxt + " appetite") : ""),
            lengthTxt,
            ("leftovers " + leftTxt)
          ];
          const sizePart = (s.lbPerCrab>0 && sizeOpt) ? (sizeOpt) : "";
          if (sizePart) parts.push(sizePart);
          return parts.filter(Boolean).join(", ") + ".";
        })()
      : "-";
    $("outExplain").textContent = (s.guests>0 && s.livePounds>0) ? ("Also about " + (s.livePounds%1? s.livePounds.toFixed(2) : s.livePounds.toFixed(0)) + " lb live weight.") :
                                  (s.guests>0 ? "Set a size to estimate live pounds." : "Enter your guest mix to calculate.");

    // Micro pills
    const courseTxt = $("course") ? $("course").selectedOptions[0].text.toLowerCase() : "main dish";
    const appetiteTxt = $("appetite") ? $("appetite").selectedOptions[0].text.toLowerCase() : "typical";
    const lengthTxt = $("length") ? $("length").selectedOptions[0].text.toLowerCase() : "standard";
    const leftTxt = $("leftovers") ? $("leftovers").selectedOptions[0].text.toLowerCase() : "no";
    $("pillGuests").textContent = s.guests>0 ? (s.guests + " guests") : "-";
    $("pillSize").textContent = s.lbPerCrab>0 ? $("size").selectedOptions[0].text.toLowerCase() : "size not set";
    $("pillPrice").textContent = (s.total>0 && s.guests>0) ? ("about " + money(s.total/s.guests) + " per person") : "pricing optional";

    // Cost estimate
    $("outSubtotal").textContent = (s.unitEach>0 && s.guests>0) ? money(s.subtotal) : "$-";
    $("outAdds").textContent =     (s.unitEach>0 && s.guests>0) ? money(s.adds)     : "$-";
    $("outTotal").textContent =    (s.unitEach>0 && s.guests>0) ? money(s.total)    : "$-";
    $("outPPP").textContent =      (s.total>0 && s.guests>0)    ? money(s.total/s.guests) : "$-";
  }

  // Wire events
  ["A","T","C","course","appetite","length","leftovers","size","priceDozen","priceEach","taxPct","fees"].forEach(id=>{
    const el=$(id); if(!el) return;
    ["input","change","keyup","blur"].forEach(ev=> el.addEventListener(ev, render));
  });

  // Start
  const start = () => { 
    try{ 
      const a=$("A"), t=$("T"), c=$("C");
      if (a && a.value==="") a.value="10";
      if (t && t.value==="") t.value="0";
      if (c && c.value==="") c.value="0";
      a && (a.focus({preventScroll:true}), a.select()); 
    }catch(e){}
    render(); 
  };
  if (document.readyState === "loading") document.addEventListener("DOMContentLoaded", start, {once:true});
  else start();
})();
</script>


  <div class="muted" style="text-align:center;margin:16px 0 0 0;">This tool provides general portion and cost estimates for planning only. Results depend on the information you enter and typical averages. DinnerMath is not responsible for decisions, purchases, or outcomes based on these estimates.<br>© 2025 DinnerMath. All rights reserved. Use for planning only.</div>
</body>
</html>
