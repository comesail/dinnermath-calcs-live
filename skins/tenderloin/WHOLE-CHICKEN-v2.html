<script>
  (function(){
    const $=id=>document.getElementById(id);
    const N=(v,d=0)=>{const n=parseFloat(v);return isFinite(n)?n:d;};
    const money=n=>(isFinite(n)&&n>=0)?"$"+n.toFixed(2):"$—";
    const courseMult=c=>(c==="side"?1.00:c==="entree"?1.60:c==="party"?1.20:0.70);
    const lenMult=v=>(v==1.15?1.15:v==1.08?1.08:v==0.95?0.95:1.00);
    const YIELD=0.60; // cooked meat per raw pound

    function compute(){
      const A=N($("A").value,0), T=N($("T").value,0), C=N($("C").value,0);
      const guests=A+T+C;
      const appetite=N($("appetite").value,1.0);
      const leftovers=N($("leftovers").value,1.0);
      const length=N($("length").value,1.0);
      const course=$("course").value;
      const birdLb=N($("bird").value,4.0);

      // base cooked oz per person (entree baseline)
      const base={adult:6, teen:8, child:4};
      let cookedOz=(A*base.adult + T*base.teen + C*base.child);
      cookedOz*=courseMult(course)*appetite*lenMult(length)*leftovers;

      const cookedOzRounded=Math.ceil(Math.max(0,cookedOz));

      // convert to raw pounds using yield
      const rawLb = cookedOzRounded/16.0 / YIELD;
      const rawLbDisp = Math.round(rawLb*10)/10;

      const birds = rawLb>0 ? Math.ceil(rawLb / birdLb) : 0;

      // pricing
      const mode=(document.getElementById("priceMode")||{}).value||"lb";
      const price=N($("priceUnit").value,0), tax=N($("taxPct").value,0)/100, fees=N($("fees").value,0);
      let subtotal=0;
      if(price>0){
        if(mode==="lb" && rawLb>0){ subtotal = rawLb*price; }
        else if(mode==="bird" && birds>0){ subtotal = birds*price; }
      }
      const adds=subtotal*tax + (fees>0?fees:0);
      const total=subtotal+adds;
      const ppp=(guests>0 && total>0)?total/guests:NaN;

      return {guests, cookedOzRounded, rawLbDisp, birds, subtotal, adds, total, ppp};
    }

    function render(){
      const s=compute();
      $("outGuests").textContent = s.guests>0 ? String(s.guests) : "—";
      $("outCookedOz").textContent = s.guests>0 ? String(s.cookedOzRounded) : "—";
      $("outRawLb").textContent = s.guests>0 ? s.rawLbDisp.toFixed(1).replace(/\.0$/,'')+" lb" : "—";
      $("outBirds").textContent = s.guests>0 ? (s.birds>0?String(s.birds):"—") : "—";
      $("outSubtotal").textContent = s.subtotal>0 ? money(s.subtotal) : "$—";
      $("outAdds").textContent     = s.subtotal>0 ? money(s.adds) : "$—";
      $("outTotal").textContent    = s.subtotal>0 ? money(s.total) : "$—";
      $("outPPP").textContent      = (s.total>0 && s.guests>0) ? money(s.ppp) : "$—";
      $("outExplain").textContent  = s.guests>0 ? "Auto-calculated from guests, course, appetite, event length, leftovers, and bird size. Bones and moisture loss are already included." : "Enter your guest mix to calculate.";
    }

    ["A","T","C","course","length","leftovers","appetite","bird","priceMode","priceUnit","taxPct","fees"].forEach(id=>{
      const el=document.getElementById(id); if(el){ el.addEventListener("input",render); el.addEventListener("change",render); }
    });

    document.querySelectorAll(".preset[data-people]").forEach(btn=>{
      btn.addEventListener("click",()=>{const n=parseInt(btn.getAttribute("data-people"),10)||0;document.getElementById("A").value=n;document.getElementById("T").value=0;document.getElementById("C").value=0;render();});
    });

    (function attachReset(){
      const btn=document.getElementById("dmReset"); if(!btn) return;
      btn.addEventListener("click", ()=>{
        document.querySelectorAll("input, select").forEach(el=>{
          if(el.tagName==="SELECT"){
            const i=Array.from(el.options).findIndex(o=>o.defaultSelected);
            el.selectedIndex = i>=0 ? i : 0;
          } else { el.value = el.defaultValue; }
        });
        document.querySelectorAll("input, select").forEach(el=>{
          el.dispatchEvent(new Event("input",{bubbles:true}));
          el.dispatchEvent(new Event("change",{bubbles:true}));
        });
        render();
      });
    })();

    render();
  })();
  </script>

<script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "FAQPage",
    "@id": "https://comesail.github.io/dinnermath-calcs/whole-chicken.html#faqs",
    "mainEntity": [
      {
        "@type": "Question",
        "name": "How much cooked chicken per person?",
        "acceptedAnswer": {
          "@type": "Answer",
          "text": "As an entree, plan about 6 oz per adult, about 8 oz for teens, and about 4 oz for children. Side or tasting portions are lighter. Appetite, event length, and leftovers adjust the estimate."
        }
      },
      {
        "@type": "Question",
        "name": "What does the bird size mean?",
        "acceptedAnswer": {
          "@type": "Answer",
          "text": "This is the average raw weight of the whole chickens you plan to buy. Options: Small about 3.0 lb, Average about 4.0 lb, Large about 5.0 lb, Jumbo about 6.0 lb. We convert raw pounds into about how many birds using your selection."
        }
      },
      {
        "@type": "Question",
        "name": "Do you account for bones and shrinkage?",
        "acceptedAnswer": {
          "@type": "Answer",
          "text": "Yes. We convert target cooked ounces to raw pounds using a typical whole chicken yield. The results already consider bones and moisture loss so shrinkage is included."
        }
      },
      {
        "@type": "Question",
        "name": "How does pricing work here?",
        "acceptedAnswer": {
          "@type": "Answer",
          "text": "Subtotal equals the unit price applied to the rounded quantity for your mode: per pound or per bird. Then tax and any extra fees are added for a total and per-person estimate."
        }
      },
      {
        "@type": "Question",
        "name": "Do you round up?",
        "acceptedAnswer": {
          "@type": "Answer",
          "text": "Birds round up to whole birds; pounds display to one decimal; cooked ounces display as whole numbers. You can add leftovers of plus 10 percent or plus 20 percent for buffer."
        }
      }
    ]
  }
  </script>

<script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "HowTo",
    "@id": "https://comesail.github.io/dinnermath-calcs/whole-chicken.html#howto",
    "name": "How to estimate whole chicken for your event",
    "description": "Use the DinnerMath Whole Chicken calculator to estimate about cooked ounces, raw pounds, birds, and cost.",
    "supply": [
      { "@type": "HowToSupply", "name": "Guest counts and event details" }
    ],
    "tool": [
      { "@type": "HowToTool", "name": "Whole Chicken calculator" }
    ],
    "step": [
      { "@type": "HowToStep", "name": "Enter guests", "text": "Enter Adults, Teens, and Children or use a quick preset." },
      { "@type": "HowToStep", "name": "Set context", "text": "Pick Course mode, Event length, Leftovers, and Appetite." },
      { "@type": "HowToStep", "name": "Choose bird size", "text": "Select Small, Average, Large, or Jumbo to convert raw pounds to about birds." },
      { "@type": "HowToStep", "name": "Add pricing", "text": "Choose per pound or per bird, enter price, tax percent, and fees to estimate total cost." },
      { "@type": "HowToStep", "name": "Review results", "text": "See about cooked ounces, about raw pounds, about birds, subtotal, tax and fees, total, and per-person cost." }
    ]
  }
  </script>

<script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "WebApplication",
    "name": "DinnerMath — Whole Chicken Calculator",
    "url": "https://comesail.github.io/dinnermath-calcs/whole-chicken.html",
    "applicationCategory": "Calculator",
    "operatingSystem": "Web",
    "browserRequirements": "Requires a modern web browser",
    "offers": { "@type": "Offer", "price": "0", "priceCurrency": "USD" },
    "publisher": { "@type": "Organization", "name": "DinnerMath" }
  }
  </script>

